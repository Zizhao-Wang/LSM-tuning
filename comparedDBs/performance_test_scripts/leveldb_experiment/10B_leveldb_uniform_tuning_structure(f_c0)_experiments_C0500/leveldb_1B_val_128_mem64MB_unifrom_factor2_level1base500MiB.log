base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Sun Jan 12 21:45:56 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test2/LSM-tuning/level10/C0_500/leveldb_uniform_f2_mem64MiB_level1base_500
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test2/LSM-tuning/level10/C0_500/leveldb_uniform_f2_mem64MiB_level1base_500
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 3381623
../../../leveldb/build_release_f_2_C0_500/db_bench --db=/mnt/db_test2/LSM-tuning/level10/C0_500/leveldb_uniform_f2_mem64MiB_level1base_500 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/uniform_read_keys16_value128_1B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0500/leveldb_uniform_f2_memory_usage_1B_key16_val128_mem64MiB_factor2_level1base500MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/uniform_read_keys16_value128_1B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-12 22:05:59 ... thread 0: (99999999,99999999) ops and (83168.9,83168.9) ops/second in (1202.372728,1202.372728) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     104     140        0        0     14002     14002      0      41   266     0       0     0      0    41         0 0.000000 0.000000
    1    19    1073     570    41961    41961     41800     41800      0      83   104     0       0     0    472    83        96 0.000000 65.269644
    2    36    2224     233    20251    20251     20225     20225      0      66    68     0       0     0    231    66        97 65.269644 65.269014
    3    63    4060     143    12397    12397     12298     12298      0      40    40     0       0     0    156    40        57 65.269014 26.990464
    4    96    6215      68     5973     5973      5933      5933      0       0     0     0       0     0     61     0         0 26.990464 0.000000
user_io:14001.624MB total_ios: 94258.145MB WriteAmplification: 6.7319
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-12 22:31:30 ... thread 0: (100000000,199999999) ops and (65304.0,73161.7) ops/second in (1531.298627,2733.671355) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     366     287        0        0     28160     28160      0      78   532     0       0     0      0    78         0 0.000000 0.000000
    1    17     935    1216    86730    86730     86333     86333      0     145   168     0       0     0   1006   145       249 0.000000 65.267919
    2    33    1967     397    33705    33705     33625     33625      0     169   181     0       0     0    386   169       204 65.267919 65.270555
    3    63    4025     403    34084    34084     33811     33811      0     171   172     0       0     0    411   171       141 65.270555 65.269568
    4   123    7968     348    29615    29615     29264     29264      0       0     0     0       0     0    350     0       181 65.269568 65.275459
    5   122    7945       0        0        0         0         0      0       0     0     0       0     0      0     0        59 65.275459 65.276345
    6    59    3851       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.276345 0.000000
user_io:28159.986MB total_ios: 211192.146MB WriteAmplification: 7.4997
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13732.910 MB data into db.)


2025-01-12 23:04:08 ... thread 0: (100000000,299999999) ops and (51077.8,63945.9) ops/second in (1957.797510,4691.468865) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     261     435        0        0     42266     42266      0     112   804     0       0     0      0   112         0 0.000000 0.000000
    1    17    1027    1909   133759   133759    133104    133104      0     170   193     0       0     0   1575   170       441 0.000000 65.269530
    2    34    2072     475    40123    40123     40025     40025      0     327   344     0       0     0    461   327       263 65.269530 0.000306
    3    67    4239     846    70563    70563     69954     69954      0     262   267     0       0     0    883   262       250 0.000306 65.275864
    4   125    7985     549    46205    46205     45568     45568      0     154   155     0       0     0    547   154       224 65.275864 65.274217
    5   246   15975     357    30004    30004     29196     29196      0       1     1     0       0     0    375     1       120 65.274217 65.283177
    6   121    7896       2      131      131       128       128      0       0     0     0       0     0      1     0         0 65.283177 0.000000
user_io:42266.106MB total_ios: 360239.995MB WriteAmplification: 8.5231
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27465.820 MB data into db.)


2025-01-12 23:34:42 ... thread 0: (100000000,399999999) ops and (54501.7,61290.7) ops/second in (1834.804592,6526.273457) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     209     583        0        0     56424     56424      0     146  1076     0       0     0      0   146         0 0.000000 0.000000
    1    18    1023    2598   180478   180478    179566    179566      0     195   218     0       0     0   2134   195       633 0.000000 65.269992
    2    33    2143     552    46520    46520     46403     46403      0     470   493     0       0     0    534   470       338 65.269992 65.269736
    3    65    4108    1251   103419   103419    102504    102504      0     365   371     0       0     0   1313   365       359 65.269736 0.000306
    4   125    7947     809    67664    67664     66598     66598      0     186   189     0       0     0    817   186       395 0.000306 65.281302
    5   246   15969     425    35601    35601     34651     34651      0      88    88     0       0     0    440    88       235 65.281302 45.139864
    6   319   20747     153    13140    13140     12822     12822      0       0     0     0       0     0    144     0         0 45.139864 0.000000
user_io:56424.465MB total_ios: 498967.221MB WriteAmplification: 8.8431
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41198.730 MB data into db.)


2025-01-13 00:11:36 ... thread 0: (100000000,499999999) ops and (45171.0,57207.7) ops/second in (2213.811190,8740.084647) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     157     731        0        0     70583     70583      0     180  1348     0       0     0      0   180         0 0.000000 0.000000
    1    19    1074    3290   227672   227672    226500    226500      0     220   243     0       0     0   2702   220       825 0.000000 65.269703
    2    34    2217     627    52738    52738     52603     52603      0     610   637     0       0     0    606   610       412 65.269703 0.000306
    3    64    4058    1619   133880   133880    132675    132675      0     459   467     0       0     0   1708   459       474 0.000306 65.275762
    4   124    7967    1024    85574    85574     84141     84141      0     318   321     0       0     0   1047   318       465 65.275762 65.278512
    5   246   15949     740    61869    61869     59925     59925      0     275   275     0       0     0    775   275       235 65.278512 45.139864
    6   484   31527     510    44285    44285     42539     42539      0       0     0     0       0     0    519     0         0 45.139864 0.000000
user_io:70582.823MB total_ios: 668966.635MB WriteAmplification: 9.4778
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54931.641 MB data into db.)


2025-01-13 00:49:04 ... thread 0: (100000000,599999999) ops and (44485.3,54604.9) ops/second in (2247.933622,10988.018269) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     104     873        0        0     84741     84741      0     214  1620     0       0     0      0   214         0 0.000000 0.000000
    1    17    1002    3967   274825   274825    273395    273395      0     245   268     0       0     0   3274   245      1018 0.000000 65.270179
    2    32    1966     704    59275    59275     59121     59121      0     760   792     0       0     0    682   760       484 65.270179 65.269249
    3    64    3993    2034   169355   169355    167827    167827      0     580   590     0       0     0   2175   580       567 65.269249 65.273610
    4   125    8021    1292   108426   108426    106522    106522      0     428   432     0       0     0   1333   428       561 65.273610 65.278568
    5   248   16184     989    83122    83122     80303     80303      0     465   466     0       0     0   1048   465       235 65.278568 45.139864
    6   642   41846     888    78521    78521     74732     74732      0       0     0     0       0     0    950     0         0 45.139864 0.000000
user_io:84741.175MB total_ios: 846641.650MB WriteAmplification: 9.9909
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68664.551 MB data into db.)


2025-01-13 01:24:49 ... thread 0: (100000000,699999999) ops and (46634.0,53303.4) ops/second in (2144.355960,13132.374229) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      52    1010        0        0     98900     98900      0     248  1892     0       0     0      0   248         0 0.000000 0.000000
    1    24    1407    4635   321965   321965    320277    320277      0     271   294     0       0     0   3843   271      1204 0.000000 65.267992
    2    33    1971     781    65817    65817     65644     65644      0     913   949     0       0     0    764   913       546 65.267992 65.270013
    3    63    3970    2433   203937   203937    202078    202078      0     705   717     0       0     0   2629   705       645 65.270013 65.275458
    4   124    7981    1578   133638   133638    131232    131232      0     483   487     0       0     0   1654   483       702 65.275458 65.278440
    5   246   15974    1109    93797    93797     90549     90549      0     656   657     0       0     0   1181   656       235 65.278440 45.139864
    6   787   51298    1305   117908   117908    111035    111035      0       0     0     0       0     0   1456     0         0 45.139864 0.000000
user_io:98899.538MB total_ios: 1019714.931MB WriteAmplification: 10.3106
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82397.461 MB data into db.)


2025-01-13 02:05:27 ... thread 0: (100000000,799999999) ops and (41007.5,51377.7) ops/second in (2438.577477,15570.951706) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     366    1143        0        0    113006    113006      0     281  2156     0       0     0      0   281         0 0.000000 0.000000
    1    17     970    5290   367720   367720    365781    365781      0     294   317     0       0     0   4398   294      1397 0.000000 65.270246
    2    32    2083     850    71625    71625     71437     71437      0    1059  1101     0       0     0    824  1059       618 65.270246 65.270577
    3    65    4116    2827   237636   237636    235462    235462      0     832   845     0       0     0   3066   832       724 65.270577 43.591041
    4   125    8094    1874   159375   159375    156461    156461      0     667   673     0       0     0   1981   667       713 43.591041 65.278327
    5   246   15994    1531   130984   130984    126346    126346      0     830   831     0       0     0   1656   830       235 65.278327 45.139864
    6   903   58891    1728   158102   158102    147463    147463      0       0     0     0       0     0   1968     0         0 45.139864 0.000000
user_io:113005.655MB total_ios: 1215955.454MB WriteAmplification: 10.7601
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96130.371 MB data into db.)


2025-01-13 02:39:31 ... thread 0: (100000000,899999999) ops and (48935.1,51094.3) ops/second in (2043.522084,17614.473790) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313    1276        0        0    127164    127164      0     315  2428     0       0     0      0   315         0 0.000000 0.000000
    1    17    1018    5963   414917   414917    412719    412719      0     319   342     0       0     0   4966   319      1590 0.000000 65.269922
    2    34    2069     929    78283    78283     78075     78075      0    1201  1249     0       0     0    901  1201       692 65.269922 65.268386
    3    65    4136    3196   269051   269051    266582    266582      0     930   944     0       0     0   3461   930       835 65.268386 65.276159
    4   124    8057    2095   178553   178553    175251    175251      0     669   675     0       0     0   2226   669       915 65.276159 65.281969
    5   247   15987    1535   131310   131310    126668    126668      0    1033  1034     0       0     0   1659  1033       235 65.281969 45.139864
    6  1028   67088    2253   207815   207815    192138    192138      0       0     0     0       0     0   2627     0         0 45.139864 0.000000
user_io:127164.013MB total_ios: 1378597.437MB WriteAmplification: 10.8411
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109863.281 MB data into db.)


2025-01-13 03:20:55 ... thread 0: (100000000,999999999) ops and (40250.9,49754.0) ops/second in (2484.414070,20098.887860) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     261    1409        0        0    141322    141322      0     349  2700     0       0     0      0   349         0 0.000000 0.000000
    1    16     966    6637   462073   462073    459616    459616      0     344   367     0       0     0   5542   344      1783 0.000000 65.269978
    2    34    2020    1002    84371    84371     84147     84147      0    1361  1415     0       0     0    972  1361       751 65.269978 65.270659
    3    64    4109    3629   305770   305770    302954    302954      0    1020  1035     0       0     0   3950  1020       958 65.270659 65.275790
    4   126    8123    2293   195531   195531    191877    191877      0     851   857     0       0     0   2446   851       937 65.275790 65.278563
    5   246   15942    1944   166900   166900    160862    160862      0    1216  1217     0       0     0   2131  1216       235 65.278563 45.139864
    6  1128   73621    2767   256825   256825    235734    235734      0       0     0     0       0     0   3286     0         0 45.139864 0.000000
user_io:141322.374MB total_ios: 1576511.782MB WriteAmplification: 11.1554
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123596.191 MB data into db.)


1000000000 operations have been finished (137329.102 MB data have been written into db)
fillzipf     :      20.099 micros/op 49753 ops/sec;    6.8 MB/s
Microseconds per op:
Count: 1000000000  Average: 20.0989  StdDev: 129.78
Percentiles: P50: 6.30 P75: 7.44 P99: 1042.12 P99.9: 1184.45 P99.99: 1198.69
------------------------------------------------------
[       2,       3 )   72434   0.007%   0.007%
[       3,       4 ) 12508963   1.251%   1.258%
[       4,       5 ) 129463389  12.946%  14.204% ###
[       5,       6 ) 279935514  27.994%  42.198% ######
[       6,       7 ) 258154843  25.815%  68.014% #####
[       7,       8 ) 158636970  15.864%  83.877% ###
[       8,       9 ) 81433721   8.143%  92.021% ##
[       9,      10 ) 37710581   3.771%  95.792% #
[      10,      12 ) 23273631   2.327%  98.119%
[      12,      14 ) 4001904   0.400%  98.519%
[      14,      16 )  788383   0.079%  98.598%
[      16,      18 )  287149   0.029%  98.627%
[      18,      20 )  233749   0.023%  98.650%
[      20,      25 )  430485   0.043%  98.693%
[      25,      30 )  161160   0.016%  98.709%
[      30,      35 )   59463   0.006%  98.715%
[      35,      40 )   29824   0.003%  98.718%
[      40,      45 )   22625   0.002%  98.720%
[      45,      50 )   15604   0.002%  98.722%
[      50,      60 )   31305   0.003%  98.725%
[      60,      70 )   15071   0.002%  98.727%
[      70,      80 )   31101   0.003%  98.730%
[      80,      90 )   11332   0.001%  98.731%
[      90,     100 )    4298   0.000%  98.731%
[     100,     120 )    3733   0.000%  98.732%
[     120,     140 )    3373   0.000%  98.732%
[     140,     160 )    1913   0.000%  98.732%
[     160,     180 )    1223   0.000%  98.732%
[     180,     200 )    1139   0.000%  98.732%
[     200,     250 )    4302   0.000%  98.733%
[     250,     300 )    1456   0.000%  98.733%
[     300,     350 )     914   0.000%  98.733%
[     350,     400 )     739   0.000%  98.733%
[     400,     450 )     564   0.000%  98.733%
[     450,     500 )     584   0.000%  98.733%
[     500,     600 )    1114   0.000%  98.733%
[     600,     700 )     944   0.000%  98.734%
[     700,     800 )     535   0.000%  98.734%
[     800,     900 )     273   0.000%  98.734%
[     900,    1000 )     130   0.000%  98.734%
[    1000,    1200 ) 12646698   1.265%  99.998%
[    1200,    1400 )    5551   0.001%  99.999%
[    1400,    1600 )    2061   0.000%  99.999%
[    1600,    1800 )     860   0.000%  99.999%
[    1800,    2000 )     307   0.000%  99.999%
[    2000,    2500 )     302   0.000%  99.999%
[    2500,    3000 )     170   0.000%  99.999%
[    3000,    3500 )     192   0.000%  99.999%
[    3500,    4000 )     221   0.000%  99.999%
[    4000,    4500 )     269   0.000%  99.999%
[    4500,    5000 )     342   0.000%  99.999%
[    5000,    6000 )     646   0.000%  99.999%
[    6000,    7000 )     489   0.000%  99.999%
[    7000,    8000 )     618   0.000% 100.000%
[    8000,    9000 )     623   0.000% 100.000%
[    9000,   10000 )     498   0.000% 100.000%
[   10000,   12000 )     812   0.000% 100.000%
[   12000,   14000 )     670   0.000% 100.000%
[   14000,   16000 )     609   0.000% 100.000%
[   16000,   18000 )     455   0.000% 100.000%
[   18000,   20000 )     363   0.000% 100.000%
[   20000,   25000 )     409   0.000% 100.000%
[   25000,   30000 )     168   0.000% 100.000%
[   30000,   35000 )      94   0.000% 100.000%
[   35000,   40000 )      37   0.000% 100.000%
[   40000,   45000 )      30   0.000% 100.000%
[   45000,   50000 )      19   0.000% 100.000%
[   50000,   60000 )      22   0.000% 100.000%
[   60000,   70000 )      15   0.000% 100.000%
[   70000,   80000 )      13   0.000% 100.000%
[   80000,   90000 )       1   0.000% 100.000%
[   90000,  100000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        5      261      1409        0    141322
  1       16      966      6637   462073    459616
  2       34     2020      1002    84371     84147
  3       64     4109      3629   305770    302954
  4      126     8123      2293   195531    191877
  5      246    15942      1944   166900    160862
  6     1128    73621      2767   256825    235734
user_io:141322.374MB total_ios: 1576511.782MB WriteAmplification: 11.1554

Checking if iostat process with PID 3381622 is still running...
    PID TTY          TIME CMD
3381622 pts/4    00:00:00 iostat
iostat process 3381622 is still running, killing now...
iostat process 3381622 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_uniform_C0500.sh: line 69: 3381622 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_uniform_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '3381623':

     23,114,559.72 msec task-clock                       #    1.150 CPUs utilized
        15,856,324      context-switches                 #  685.989 /sec
             5,240      cpu-migrations                   #    0.227 /sec
        25,634,347      page-faults                      #    1.109 K/sec
73,558,327,452,023      cycles                           #    3.182 GHz
158,211,633,908,805      instructions                     #    2.15  insn per cycle
22,399,663,707,082      branches                         #  969.072 M/sec
    49,774,779,781      branch-misses                    #    0.22% of all branches
                        TopdownL1                 #      2.3 %  tma_backend_bound
                                                  #     90.1 %  tma_bad_speculation
                                                  #      3.0 %  tma_frontend_bound
                                                  #      4.6 %  tma_retiring

   20097.842349322 seconds time elapsed
