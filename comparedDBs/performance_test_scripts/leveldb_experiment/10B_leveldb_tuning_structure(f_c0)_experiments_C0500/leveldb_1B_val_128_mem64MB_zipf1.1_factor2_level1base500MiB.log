base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Sat Jan  4 12:45:22 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_500/leveldb_f2_1.1_mem64MiB_level1base_500
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_500/leveldb_f2_1.1_mem64MiB_level1base_500
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 1506104
../../../leveldb/build_release_f_10_C0_500/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_500/leveldb_f2_1.1_mem64MiB_level1base_500 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/zipf1.1_keys10.0B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0500/leveldb_zipf1.1_f2_memory_usage_1B_key16_val128_mem64MiB_factor2_level1base500MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/zipf1.1_keys10.0B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-04 12:59:01 ... thread 0: (99999999,99999999) ops and (122194.7,122194.7) ops/second in (818.366109,818.366109) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256     165        0        0     13748     13748      0      50   263     0       0     0      0    50         0 0.000000 0.000000
    1    10     577     419    35498    35498     26018     26018      0      35    46     0       0     0    383    35         9 0.000000 65.238281
    2    17    1095     176    13652    13652     13095     13095      0       1     1     0       0     0    186     1        27 65.238281 20.515684
    3    28    1719       1      131      131        67        67      0       0     0     0       0     0      1     0         0 20.515684 0.000000
user_io:13747.805MB total_ios: 52928.055MB WriteAmplification: 3.8499
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-04 13:15:30 ... thread 0: (100000000,199999999) ops and (101110.7,110657.3) ops/second in (989.014995,1807.381104) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     103     330        0        0     27650     27650      0      94   537     0       0     0      0    94         0 0.000000 0.000000
    1    15     857     930    76492    76492     57013     57013      0      73    84     0       0     0    852    73        30 0.000000 65.284998
    2    23    1320     400    30536    30536     29367     29367      0      30    31     0       0     0    432    30        45 65.284998 46.030262
    3    33    1983      68     5251     5251      5058      5058      0       0     0     0       0     0     60     0        39 46.030262 65.209171
    4    39    2545       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.209171 0.000000
user_io:27649.512MB total_ios: 119086.955MB WriteAmplification: 4.3070
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13735.996 MB data into db.)


2025-01-04 13:32:22 ... thread 0: (100000000,299999999) ops and (98771.7,106389.9) ops/second in (1012.435355,2819.816459) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     205     495        0        0     41500     41500      0     135   805     0       0     0      0   135         0 0.000000 0.000000
    1    13     693    1447   117353   117353     87914     87914      0     110   121     0       0     0   1319   110        54 0.000000 65.285161
    2    24    1410     581    44479    44479     42898     42898      0      62    66     0       0     0    620    62        67 65.285161 65.277070
    3    45    2845     156    11920    11920     11484     11484      0      18    18     0       0     0    144    18        59 65.277070 36.227564
    4    71    4499      35     2925     2925      2535      2535      0       0     0     0       0     0     39     0         0 36.227564 0.000000
user_io:41499.875MB total_ios: 186330.814MB WriteAmplification: 4.4899
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27471.990 MB data into db.)


2025-01-04 13:50:59 ... thread 0: (100000000,399999999) ops and (89489.6,101593.4) ops/second in (1117.447954,3937.264413) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     308     669        0        0     55402     55402      0     171  1074     0       0     0      0   171         0 0.000000 0.000000
    1    15     881    2010   160457   160457    121104    121104      0     144   155     0       0     0   1824   144        77 0.000000 65.253753
    2    29    1812     778    59032    59032     56917     56917      0      95   101     0       0     0    829    95        79 65.253753 65.240347
    3    57    3511     243    18406    18406     17724     17724      0      46    46     0       0     0    227    46        59 65.240347 36.227564
    4    99    6331     101     7754     7754      7344      7344      0       0     0     0       0     0     92     0         0 36.227564 0.000000
user_io:55401.595MB total_ios: 258490.257MB WriteAmplification: 4.6658
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41207.983 MB data into db.)


2025-01-04 14:09:33 ... thread 0: (100000000,499999999) ops and (89819.9,98998.1) ops/second in (1113.338648,5050.603061) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256     840        0        0     69303     69303      0     208  1346     0       0     0      0   208         0 0.000000 0.000000
    1    10     598    2570   203274   203274    153712    153712      0     178   189     0       0     0   2315   178       107 0.000000 65.284777
    2    19    1118     954    72258    72258     69783     69783      0     125   133     0       0     0   1021   125       118 65.284777 61.937799
    3    34    1963     326    24912    24912     23881     23881      0      88    88     0       0     0    304    88       104 61.937799 65.220905
    4    62    3988     196    15027    15027     14609     14609      0       0     0     0       0     0    188     0       121 65.220905 65.187844
    5   121    7895       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.187844 0.000000
user_io:69303.310MB total_ios: 331287.847MB WriteAmplification: 4.7803
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54943.976 MB data into db.)


2025-01-04 14:27:02 ... thread 0: (100000000,599999999) ops and (95305.6,98362.9) ops/second in (1049.256441,6099.859502) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     154    1013        0        0     83205     83205      0     248  1619     0       0     0      0   248         0 0.000000 0.000000
    1    13     729    3101   244260   244260    184739    184739      0     212   223     0       0     0   2775   212       132 0.000000 65.183086
    2    26    1507    1162    87657    87657     84566     84566      0     154   165     0       0     0   1240   154       134 65.183086 65.285609
    3    51    3188     401    30780    30780     29478     29478      0     101   102     0       0     0    378   101       114 65.285609 65.188087
    4    81    5143     231    17870    17870     17195     17195      0       0     0     0       0     0    225     0       121 65.188087 65.187844
    5   121    7895       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.187844 0.000000
user_io:83205.043MB total_ios: 399182.342MB WriteAmplification: 4.7976
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68679.969 MB data into db.)


2025-01-04 14:45:28 ... thread 0: (100000000,699999999) ops and (90401.3,97140.8) ops/second in (1106.178767,7206.038269) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     308    1182        0        0     97107     97107      0     284  1887     0       0     0      0   284         0 0.000000 0.000000
    1    16     944    3653   286957   286957    217471    217471      0     247   258     0       0     0   3276   247       154 0.000000 65.276044
    2    29    1733    1331   100241   100241     96672     96672      0     184   200     0       0     0   1428   184       147 65.276044 65.250308
    3    55    3387     486    37171    37171     35614     35614      0     138   139     0       0     0    461   138       114 65.250308 65.188087
    4   106    6832     324    25024    25024     23954     23954      0       1     1     0       0     0    312     1       125 65.188087 65.186755
    5   126    8220       4      261      261       260       260      0       0     0     0       0     0      3     0         0 65.186755 0.000000
user_io:97106.726MB total_ios: 471077.273MB WriteAmplification: 4.8511
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82415.963 MB data into db.)


2025-01-04 15:05:13 ... thread 0: (100000000,799999999) ops and (84425.3,95345.7) ops/second in (1184.479725,8390.517994) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256    1352        0        0    110957    110957      0     318  2158     0       0     0      0   318         0 0.000000 0.000000
    1    16     915    4239   331162   331162    251458    251458      0     277   288     0       0     0   3789   277       180 0.000000 65.234166
    2    32    1895    1517   114116   114116    110230    110230      0     222   239     0       0     0   1619   222       161 65.234166 38.978441
    3    61    3754     593    45224    45224     43345     43345      0     177   178     0       0     0    568   177       114 38.978441 65.188087
    4   116    7568     419    31461    31461     30384     30384      0      10    10     0       0     0    389    10       144 65.188087 39.948417
    5   147    9524      21     1592     1592      1094      1094      0       0     0     0       0     0     20     0         0 39.948417 0.000000
user_io:110957.123MB total_ios: 547468.004MB WriteAmplification: 4.9341
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96151.958 MB data into db.)


2025-01-04 15:25:29 ... thread 0: (100000000,899999999) ops and (82205.0,93681.8) ops/second in (1216.471213,9606.989207) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     205    1518        0        0    124859    124859      0     352  2430     0       0     0      0   352         0 0.000000 0.000000
    1    17     995    4842   377150   377150    287074    287074      0     307   318     0       0     0   4335   307       206 0.000000 65.193831
    2    33    1952    1687   127270   127270    123115    123115      0     261   280     0       0     0   1823   261       174 65.193831 65.286758
    3    63    3840     727    53709    53709     51411     51411      0     178   182     0       0     0    679   178       152 65.286758 65.279613
    4   119    7693     424    31851    31851     30773     30773      0      49    49     0       0     0    391    49       144 65.279613 39.948417
    5   179   11612     128     8585     8585      7630      7630      0       0     0     0       0     0    105     0         0 39.948417 0.000000
user_io:124858.895MB total_ios: 624861.729MB WriteAmplification: 5.0045
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109887.955 MB data into db.)


2025-01-04 15:46:07 ... thread 0: (100000000,999999999) ops and (80755.6,92205.9) ops/second in (1238.303795,10845.293002) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     154    1682        0        0    138761    138761      0     386  2702     0       0     0      0   386         0 0.000000 0.000000
    1    18     964    5441   423358   423358    322984    322984      0     337   348     0       0     0   4882   337       233 0.000000 65.282486
    2    34    2076    1883   142435   142435    137901    137901      0     300   322     0       0     0   2039   300       186 65.282486 65.261626
    3    63    3942     849    61932    61932     59312     59312      0     188   192     0       0     0    783   188       186 65.261626 65.246997
    4   125    7968     455    33994    33994     32913     32913      0      87    87     0       0     0    414    87       144 65.246997 39.948417
    5   217   14075     233    15423    15423     14450     14450      0       0     0     0       0     0    198     0         0 39.948417 0.000000
user_io:138760.616MB total_ios: 706321.048MB WriteAmplification: 5.0902
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123623.953 MB data into db.)


1000000000 operations have been finished (137359.952 MB data have been written into db)
fillzipf     :      10.845 micros/op 92205 ops/sec;   12.7 MB/s
Microseconds per op:
Count: 1000000000  Average: 10.8453  StdDev: 111.02
Percentiles: P50: 5.72 P75: 6.66 P99: 11.27 P99.9: 1158.50 P99.99: 1196.86
------------------------------------------------------
[       2,       3 )   84680   0.008%   0.008%
[       3,       4 ) 63625819   6.363%   6.371% #
[       4,       5 ) 194302118  19.430%  25.801% ####
[       5,       6 ) 336484836  33.648%  59.450% #######
[       6,       7 ) 234267323  23.427%  82.876% #####
[       7,       8 ) 103903276  10.390%  93.267% ##
[       8,       9 ) 38950249   3.895%  97.162% #
[       9,      10 ) 13950983   1.395%  98.557%
[      10,      12 ) 7002254   0.700%  99.257%
[      12,      14 ) 1125768   0.113%  99.370%
[      14,      16 )  365250   0.037%  99.406%
[      16,      18 )  214404   0.021%  99.428%
[      18,      20 )  220142   0.022%  99.450%
[      20,      25 )  437944   0.044%  99.494%
[      25,      30 )  181128   0.018%  99.512%
[      30,      35 )   65943   0.007%  99.518%
[      35,      40 )   26086   0.003%  99.521%
[      40,      45 )   12780   0.001%  99.522%
[      45,      50 )    7643   0.001%  99.523%
[      50,      60 )   10375   0.001%  99.524%
[      60,      70 )    7313   0.001%  99.525%
[      70,      80 )    5294   0.001%  99.525%
[      80,      90 )    6280   0.001%  99.526%
[      90,     100 )    2216   0.000%  99.526%
[     100,     120 )    3961   0.000%  99.526%
[     120,     140 )    2810   0.000%  99.527%
[     140,     160 )    1913   0.000%  99.527%
[     160,     180 )    1732   0.000%  99.527%
[     180,     200 )    1931   0.000%  99.527%
[     200,     250 )    4398   0.000%  99.528%
[     250,     300 )    1158   0.000%  99.528%
[     300,     350 )     834   0.000%  99.528%
[     350,     400 )     730   0.000%  99.528%
[     400,     450 )     493   0.000%  99.528%
[     450,     500 )     327   0.000%  99.528%
[     500,     600 )     488   0.000%  99.528%
[     600,     700 )     327   0.000%  99.528%
[     700,     800 )     245   0.000%  99.528%
[     800,     900 )     198   0.000%  99.528%
[     900,    1000 )     136   0.000%  99.528%
[    1000,    1200 ) 4691889   0.469%  99.997%
[    1200,    1400 )    3445   0.000%  99.998%
[    1400,    1600 )    1419   0.000%  99.998%
[    1600,    1800 )     768   0.000%  99.998%
[    1800,    2000 )     519   0.000%  99.998%
[    2000,    2500 )     931   0.000%  99.998%
[    2500,    3000 )     722   0.000%  99.998%
[    3000,    3500 )     609   0.000%  99.998%
[    3500,    4000 )     593   0.000%  99.998%
[    4000,    4500 )     540   0.000%  99.998%
[    4500,    5000 )     598   0.000%  99.998%
[    5000,    6000 )    1121   0.000%  99.998%
[    6000,    7000 )     994   0.000%  99.999%
[    7000,    8000 )     991   0.000%  99.999%
[    8000,    9000 )     841   0.000%  99.999%
[    9000,   10000 )     804   0.000%  99.999%
[   10000,   12000 )    1514   0.000%  99.999%
[   12000,   14000 )    1707   0.000%  99.999%
[   14000,   16000 )    1414   0.000%  99.999%
[   16000,   18000 )    1369   0.000%  99.999%
[   18000,   20000 )    1029   0.000% 100.000%
[   20000,   25000 )    1739   0.000% 100.000%
[   25000,   30000 )     997   0.000% 100.000%
[   30000,   35000 )     663   0.000% 100.000%
[   35000,   40000 )     388   0.000% 100.000%
[   40000,   45000 )     179   0.000% 100.000%
[   45000,   50000 )     141   0.000% 100.000%
[   50000,   60000 )     143   0.000% 100.000%
[   60000,   70000 )      72   0.000% 100.000%
[   70000,   80000 )      46   0.000% 100.000%
[   80000,   90000 )      23   0.000% 100.000%
[   90000,  100000 )       3   0.000% 100.000%
[  100000,  120000 )       3   0.000% 100.000%
[  250000,  300000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        3      154      1682        0    138761
  1       18      964      5441   423358    322984
  2       34     2076      1883   142435    137901
  3       63     3942       849    61932     59312
  4      125     7968       455    33994     32913
  5      217    14075       233    15423     14450
user_io:138760.616MB total_ios: 706321.048MB WriteAmplification: 5.0902

Checking if iostat process with PID 1506103 is still running...
    PID TTY          TIME CMD
1506103 pts/1    00:00:00 iostat
iostat process 1506103 is still running, killing now...
iostat process 1506103 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_zipf_C0500.sh: line 45: 1506103 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_zipf${zipf_a}_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '1506104':

     13,745,675.72 msec task-clock                       #    1.267 CPUs utilized
         6,009,969      context-switches                 #  437.226 /sec
             5,593      cpu-migrations                   #    0.407 /sec
        22,880,314      page-faults                      #    1.665 K/sec
43,651,097,673,181      cycles                           #    3.176 GHz
91,744,432,219,528      instructions                     #    2.10  insn per cycle
13,044,187,242,274      branches                         #  948.967 M/sec
    34,485,465,931      branch-misses                    #    0.26% of all branches
                        TopdownL1                 #      1.6 %  tma_backend_bound
                                                  #     92.0 %  tma_bad_speculation
                                                  #      2.7 %  tma_frontend_bound
                                                  #      3.8 %  tma_retiring

   10845.163459787 seconds time elapsed

