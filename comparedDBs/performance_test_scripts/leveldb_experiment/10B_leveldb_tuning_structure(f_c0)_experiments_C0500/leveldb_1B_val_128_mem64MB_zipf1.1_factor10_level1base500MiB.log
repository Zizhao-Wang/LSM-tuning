base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Sat Jan  4 00:03:26 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_500/leveldb_f10_1.1_mem64MiB_level1base_500
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_500/leveldb_f10_1.1_mem64MiB_level1base_500
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 1226256
../../../leveldb/build_release_f_10_C0_500/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_500/leveldb_f10_1.1_mem64MiB_level1base_500 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/zipf1.1_keys10.0B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0500/leveldb_zipf1.1_f10_memory_usage_1B_key16_val128_mem64MiB_factor10_level1base500MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/zipf1.1_keys10.0B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-04 00:17:00 ... thread 0: (99999999,99999999) ops and (122874.3,122874.3) ops/second in (813.839708,813.839708) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     308     155        0        0     13748     13748      0      48   262     0       0     0      0    48         0 0.000000 0.000000
    1    14     795     400    35443    35443     26024     26024      0      39    54     0       0     0    388    39         0 0.000000 0.000000
    2    38    2436     200    16782    16782     15990     15990      0       0     0     0       0     0    233     0         0 0.000000 0.000000
user_io:13747.805MB total_ios: 55762.723MB WriteAmplification: 4.0561
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-04 00:33:12 ... thread 0: (100000000,199999999) ops and (102853.3,111975.9) ops/second in (972.258425,1786.098133) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     103     311        0        0     27650     27650      0      89   537     0       0     0      0    89         0 0.000000 0.000000
    1    17     774     867    74549    74549     54855     54855      0     103   121     0       0     0    903   103         0 0.000000 0.000000
    2    86    5506     535    44558    44558     42985     42985      0       0     0     0       0     0    628     0         0 0.000000 0.000000
user_io:27649.512MB total_ios: 125489.841MB WriteAmplification: 4.5386
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13735.996 MB data into db.)


2025-01-04 00:49:26 ... thread 0: (100000000,299999999) ops and (102712.6,108707.9) ops/second in (973.589975,2759.688108) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     154     467        0        0     41551     41551      0     129   807     0       0     0      0   129         0 0.000000 0.000000
    1    17     764    1336   113914   113914     84231     84231      0     162   184     0       0     0   1476   162         6 0.000000 65.270430
    2    99    6354     858    71748    71748     69428     69428      0       1     1     0       0     0   1032     1        34 65.270430 65.268445
    3    35    2238       3      261      261       223       223      0       0     0     0       0     0      3     0         0 65.268445 0.000000
user_io:41551.176MB total_ios: 195433.388MB WriteAmplification: 4.7034
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27471.990 MB data into db.)


2025-01-04 01:06:38 ... thread 0: (100000000,399999999) ops and (96844.7,105477.7) ops/second in (1032.581407,3792.269515) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     205     626        0        0     55402     55402      0     167  1076     0       0     0      0   167         0 0.000000 0.000000
    1    16     755    1818   153412   153412    113621    113621      0     224   248     0       0     0   2068   224        11 0.000000 65.237955
    2    94    5706    1208   100348   100348     97138     97138      0       3     3     0       0     0   1468     3        85 65.237955 65.233040
    3    88    5692      14     1108     1108      1065      1065      0       0     0     0       0     0     14     0         0 65.233040 0.000000
user_io:55401.595MB total_ios: 267225.992MB WriteAmplification: 4.8234
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41207.983 MB data into db.)


2025-01-04 01:24:35 ... thread 0: (100000000,499999999) ops and (92917.0,102701.1) ops/second in (1076.229552,4868.499067) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256     784        0        0     69303     69303      0     204  1346     0       0     0      0   204         0 0.000000 0.000000
    1    20     785    2328   194904   194904    144919    144919      0     288   316     0       0     0   2700   288        11 0.000000 65.237955
    2   115    7143    1587   129744   129744    125629    125629      0       5     5     0       0     0   1913     5       103 65.237955 65.210597
    3   108    6977      20     1630     1630      1587      1587      0       0     0     0       0     0     20     0         0 65.210597 0.000000
user_io:69303.310MB total_ios: 341437.909MB WriteAmplification: 4.9267
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54943.976 MB data into db.)


2025-01-04 01:41:56 ... thread 0: (100000000,599999999) ops and (95993.4,101518.8) ops/second in (1041.738053,5910.237120) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     103     940        0        0     83205     83205      0     242  1620     0       0     0      0   242         0 0.000000 0.000000
    1    19     865    2822   235832   235832    175540    175540      0     349   384     0       0     0   3342   349        11 0.000000 65.237955
    2    98    6063    1950   157524   157524    152360    152360      0       7     7     0       0     0   2331     7       158 65.237955 65.190271
    3   165   10675      30     2282     2282      2238      2238      0       0     0     0       0     0     28     0         0 65.190271 0.000000
user_io:83205.043MB total_ios: 413343.158MB WriteAmplification: 4.9678
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68679.969 MB data into db.)


2025-01-04 01:59:16 ... thread 0: (100000000,699999999) ops and (96209.3,100724.7) ops/second in (1039.401030,6949.638150) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256    1094        0        0     97107     97107      0     279  1888     0       0     0      0   279         0 0.000000 0.000000
    1    22     952    3323   276982   276982    206678    206678      0     411   447     0       0     0   3960   411        15 0.000000 65.277875
    2   122    7559    2259   182576   182576    176745    176745      0      29    29     0       0     0   2715    29       159 65.277875 49.871297
    3   174   11270      78     6558     6558      5624      5624      0       0     0     0       0     0     86     0         0 49.871297 0.000000
user_io:97106.726MB total_ios: 486153.789MB WriteAmplification: 5.0064
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82415.963 MB data into db.)


2025-01-04 02:18:17 ... thread 0: (100000000,799999999) ops and (87592.2,98871.7) ops/second in (1141.654458,8091.292608) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      51    1247        0        0    110957    110957      0     314  2162     0       0     0      0   314         0 0.000000 0.000000
    1    21    1013    3866   321045   321045    240313    240313      0     479   518     0       0     0   4663   479        15 0.000000 65.277875
    2   140    8781    2627   212602   212602    206047    206047      0      55    55     0       0     0   3169    55       159 65.277875 49.871297
    3   196   12667     136    11255    11255     10097     10097      0       0     0     0       0     0    145     0         0 49.871297 0.000000
user_io:110957.123MB total_ios: 567413.963MB WriteAmplification: 5.1138
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96151.958 MB data into db.)


2025-01-04 02:38:29 ... thread 0: (100000000,899999999) ops and (82549.8,96746.3) ops/second in (1211.389907,9302.682515) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      51    1399        0        0    124859    124859      0     348  2433     0       0     0      0   348         0 0.000000 0.000000
    1    25    1010    4416   365667   365667    274590    274590      0     547   589     0       0     0   5394   547        15 0.000000 65.277875
    2   159    9692    3039   245898   245898    238717    238717      0      86    86     0       0     0   3674    86       159 65.277875 49.871297
    3   226   14629     208    16747    16747     15527     15527      0       0     0     0       0     0    215     0         0 49.871297 0.000000
user_io:124858.895MB total_ios: 653694.033MB WriteAmplification: 5.2355
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109887.955 MB data into db.)


2025-01-04 02:58:24 ... thread 0: (100000000,999999999) ops and (83649.2,95254.9) ops/second in (1195.468709,10498.151224) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0    1547        0        0    138761    138761      0     382  2705     0       0     0      0   382         0 0.000000 0.000000
    1    21    1063    4973   411173   411173    309772    309772      0     611   658     0       0     0   6145   611        15 0.000000 65.277875
    2   157    9632    3419   275785   275785    267539    267539      0     126   126     0       0     0   4133   126       159 65.277875 49.871297
    3   265   17185     300    23676    23676     22442     22442      0       0     0     0       0     0    298     0         0 49.871297 0.000000
user_io:138760.616MB total_ios: 738513.908MB WriteAmplification: 5.3222
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123623.953 MB data into db.)


1000000000 operations have been finished (137359.952 MB data have been written into db)
fillzipf     :      10.498 micros/op 95254 ops/sec;   13.1 MB/s
Microseconds per op:
Count: 1000000000  Average: 10.4982  StdDev: 97.50
Percentiles: P50: 5.65 P75: 6.56 P99: 10.99 P99.9: 1156.89 P99.99: 1196.52
------------------------------------------------------
[       2,       3 )  130734   0.013%   0.013%
[       3,       4 ) 68908906   6.891%   6.904% #
[       4,       5 ) 204478682  20.448%  27.352% ####
[       5,       6 ) 348102263  34.810%  62.162% #######
[       6,       7 ) 227880417  22.788%  84.950% #####
[       7,       8 ) 93075414   9.308%  94.258% ##
[       8,       9 ) 32765266   3.277%  97.534% #
[       9,      10 ) 11642640   1.164%  98.698%
[      10,      12 ) 6064340   0.606%  99.305%
[      12,      14 )  981802   0.098%  99.403%
[      14,      16 )  312435   0.031%  99.434%
[      16,      18 )  195527   0.020%  99.454%
[      18,      20 )  210323   0.021%  99.475%
[      20,      25 )  391626   0.039%  99.514%
[      25,      30 )  139911   0.014%  99.528%
[      30,      35 )   46859   0.005%  99.533%
[      35,      40 )   17763   0.002%  99.534%
[      40,      45 )    7588   0.001%  99.535%
[      45,      50 )    4218   0.000%  99.536%
[      50,      60 )   30187   0.003%  99.539%
[      60,      70 )   14321   0.001%  99.540%
[      70,      80 )    4221   0.000%  99.541%
[      80,      90 )    5662   0.001%  99.541%
[      90,     100 )    2931   0.000%  99.541%
[     100,     120 )    3259   0.000%  99.542%
[     120,     140 )    5059   0.001%  99.542%
[     140,     160 )    2249   0.000%  99.542%
[     160,     180 )    1767   0.000%  99.543%
[     180,     200 )    1625   0.000%  99.543%
[     200,     250 )    5359   0.001%  99.543%
[     250,     300 )    1158   0.000%  99.543%
[     300,     350 )     756   0.000%  99.544%
[     350,     400 )     542   0.000%  99.544%
[     400,     450 )     327   0.000%  99.544%
[     450,     500 )     201   0.000%  99.544%
[     500,     600 )     287   0.000%  99.544%
[     600,     700 )     230   0.000%  99.544%
[     700,     800 )     183   0.000%  99.544%
[     800,     900 )     127   0.000%  99.544%
[     900,    1000 )      99   0.000%  99.544%
[    1000,    1200 ) 4541785   0.454%  99.998%
[    1200,    1400 )    3070   0.000%  99.998%
[    1400,    1600 )    1103   0.000%  99.998%
[    1600,    1800 )     573   0.000%  99.998%
[    1800,    2000 )     495   0.000%  99.998%
[    2000,    2500 )     851   0.000%  99.999%
[    2500,    3000 )     589   0.000%  99.999%
[    3000,    3500 )     538   0.000%  99.999%
[    3500,    4000 )     559   0.000%  99.999%
[    4000,    4500 )     535   0.000%  99.999%
[    4500,    5000 )     529   0.000%  99.999%
[    5000,    6000 )     919   0.000%  99.999%
[    6000,    7000 )     774   0.000%  99.999%
[    7000,    8000 )     700   0.000%  99.999%
[    8000,    9000 )     665   0.000%  99.999%
[    9000,   10000 )     691   0.000%  99.999%
[   10000,   12000 )    1247   0.000%  99.999%
[   12000,   14000 )    1519   0.000%  99.999%
[   14000,   16000 )    1250   0.000% 100.000%
[   16000,   18000 )    1126   0.000% 100.000%
[   18000,   20000 )     744   0.000% 100.000%
[   20000,   25000 )    1131   0.000% 100.000%
[   25000,   30000 )     560   0.000% 100.000%
[   30000,   35000 )     295   0.000% 100.000%
[   35000,   40000 )     173   0.000% 100.000%
[   40000,   45000 )     106   0.000% 100.000%
[   45000,   50000 )      61   0.000% 100.000%
[   50000,   60000 )      77   0.000% 100.000%
[   60000,   70000 )      34   0.000% 100.000%
[   70000,   80000 )      19   0.000% 100.000%
[   80000,   90000 )      15   0.000% 100.000%
[   90000,  100000 )       2   0.000% 100.000%
[  100000,  120000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        0        0      1547        0    138761
  1       21     1063      4973   411173    309772
  2      157     9632      3419   275785    267539
  3      265    17185       300    23676     22442
user_io:138760.616MB total_ios: 738513.908MB WriteAmplification: 5.3222

Checking if iostat process with PID 1226255 is still running...
    PID TTY          TIME CMD
1226255 pts/4    00:00:00 iostat
iostat process 1226255 is still running, killing now...
iostat process 1226255 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_zipf_C0500.sh: line 45: 1226255 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_zipf${zipf_a}_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '1226256':

     13,762,592.97 msec task-clock                       #    1.311 CPUs utilized
         6,017,515      context-switches                 #  437.237 /sec
             3,356      cpu-migrations                   #    0.244 /sec
        19,009,101      page-faults                      #    1.381 K/sec
44,019,654,458,812      cycles                           #    3.199 GHz
93,955,470,659,512      instructions                     #    2.13  insn per cycle
13,343,538,760,952      branches                         #  969.551 M/sec
    33,952,734,365      branch-misses                    #    0.25% of all branches
                        TopdownL1                 #      2.3 %  tma_backend_bound
                                                  #     88.8 %  tma_bad_speculation
                                                  #      4.7 %  tma_frontend_bound
                                                  #      4.2 %  tma_retiring

   10497.776432988 seconds time elapsed
