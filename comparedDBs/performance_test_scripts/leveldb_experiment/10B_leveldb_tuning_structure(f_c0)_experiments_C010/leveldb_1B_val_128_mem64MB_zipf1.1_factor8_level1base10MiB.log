base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Mon Jan  6 16:25:29 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_10/leveldb_f8_1.1_mem64MiB_level1base_10
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_10/leveldb_f8_1.1_mem64MiB_level1base_10
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 2437055
../../../leveldb/build_release_f_8_C0_10/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_10/leveldb_f8_1.1_mem64MiB_level1base_10 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/zipf1.1_keys10.0B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C010/leveldb_zipf1.1_f8_memory_usage_1B_key16_val128_mem64MiB_factor8_level1base10MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/zipf1.1_keys10.0B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-06 16:37:36 ... thread 0: (99999999,99999999) ops and (137553.0,137553.0) ops/second in (726.992442,726.992442) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      51     175        0        0     13594     13594      0      38   264     0       0     0      0    38         0 0.000000 0.000000
    1     3     132     114    13546    13546      4624      4624      0      68    86     0       0     0      2    68        11 0.000000 1.844119
    2     3      82     112     8394     8394      8051      8051      0      64    65     0       0     0    110    64         3 1.844119 65.252043
    3    20    1155     258    19676    19676     18904     18904      0      10    10     0       0     0    271    10        24 65.252043 36.480486
    4    34    2070      34     2667     2667      2600      2600      0       0     0     0       0     0     31     0         0 36.480486 0.000000
user_io:13593.913MB total_ios: 47772.529MB WriteAmplification: 3.5143
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-06 16:52:08 ... thread 0: (100000000,199999999) ops and (114631.3,125050.5) ops/second in (872.361785,1599.354227) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     343        0        0     27496     27496      0      72   536     0       0     0      0    72         0 0.000000 0.000000
    1     3     132     229    27513    27513      9136      9136      0     133   167     0       0     0      9   133        24 0.000000 1.739635
    2     3     131     234    17721    17721     17090     17090      0     124   138     0       0     0    229   124         5 1.739635 65.286336
    3    23    1219     544    41823    41823     40261     40261      0      61    62     0       0     0    608    61        25 65.286336 0.000308
    4    75    4774     190    15173    15173     14503     14503      0       0     0     0       0     0    201     0         0 0.000308 0.000000
user_io:27495.620MB total_ios: 108485.337MB WriteAmplification: 3.9455
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13735.996 MB data into db.)


2025-01-06 17:07:55 ... thread 0: (100000000,299999999) ops and (105683.8,117851.7) ops/second in (946.218838,2545.573065) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256     511        0        0     41295     41295      0     105   800     0       0     0      0   105         0 0.000000 0.000000
    1     0       0     342    41062    41062     13559     13559      0     192   250     0       0     0     13   192        38 0.000000 65.273267
    2     4     226     358    27064    27064     26104     26104      0     190   208     0       0     0    351   190         7 65.273267 65.286416
    3    27    1343     843    64098    64098     61834     61834      0     112   117     0       0     0    987   112        25 65.286416 0.000308
    4   118    7442     402    30852    30852     29551     29551      0       0     0     0       0     0    408     0         0 0.000308 0.000000
user_io:41294.689MB total_ios: 172342.783MB WriteAmplification: 4.1735
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27471.990 MB data into db.)


2025-01-06 17:24:22 ... thread 0: (100000000,399999999) ops and (101250.2,113211.0) ops/second in (987.652614,3533.225679) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     205     679        0        0     55196     55196      0     139  1072     0       0     0      0   139         0 0.000000 0.000000
    1     0       0     455    55017    55017     18059     18059      0     262   337     0       0     0     14   262        52 0.000000 65.273385
    2     5     215     483    36829    36829     35563     35563      0     258   278     0       0     0    492   258         8 65.273385 65.286184
    3    27    1242    1123    85865    85865     82747     82747      0     171   177     0       0     0   1374   171        25 65.286184 0.000308
    4   161   10191     677    50160    50160     48355     48355      0       0     0     0       0     0    678     0         3 0.000308 65.285242
    5     3     196       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.285242 0.000000
user_io:55196.410MB total_ios: 239920.685MB WriteAmplification: 4.3467
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41207.983 MB data into db.)


2025-01-06 17:39:32 ... thread 0: (100000000,499999999) ops and (109937.7,112540.8) ops/second in (909.606018,4442.831697) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     848        0        0     69098     69098      0     176  1347     0       0     0      0   176         0 0.000000 0.000000
    1     3     132     571    69144    69144     22653     22653      0     327   418     0       0     0     21   327        63 0.000000 65.275343
    2     3     140     596    45665    45665     44122     44122      0     325   350     0       0     0    604   325        11 65.275343 65.286716
    3    23    1264    1422   108539   108539    104689    104689      0     209   217     0       0     0   1750   209        45 65.286716 65.242214
    4   106    6528     865    62269    62269     60023     60023      0       0     0     0       0     0    852     0       107 65.242214 65.234981
    5   107    6905       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.234981 0.000000
user_io:69098.124MB total_ios: 300585.350MB WriteAmplification: 4.3501
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54943.976 MB data into db.)


2025-01-06 17:56:36 ... thread 0: (100000000,599999999) ops and (97620.7,109745.3) ops/second in (1024.372836,5467.204533) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     359    1017        0        0     83000     83000      0     209  1611     0       0     0      0   209         0 0.000000 0.000000
    1     0       0     685    82692    82692     27025     27025      0     397   506     0       0     0     24   397        73 0.000000 1.746969
    2     4     136     729    55557    55557     53691     53691      0     392   420     0       0     0    742   392        12 1.746969 65.286407
    3    30    1324    1728   131098   131098    126379    126379      0     261   272     0       0     0   2133   261        45 65.286407 65.242214
    4   147    9361    1140    79342    79342     76680     76680      0       0     0     0       0     0   1097     0       107 65.242214 65.234981
    5   107    6905       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.234981 0.000000
user_io:82999.857MB total_ios: 366774.332MB WriteAmplification: 4.4190
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68679.969 MB data into db.)


2025-01-06 18:13:23 ... thread 0: (100000000,699999999) ops and (99315.9,108123.3) ops/second in (1006.887977,6474.092510) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     308    1191        0        0     96902     96902      0     243  1883     0       0     0      0   243         0 0.000000 0.000000
    1     0       0     804    96663    96663     31539     31539      0     458   589     0       0     0     32   458        84 0.000000 65.276317
    2     5     258     854    65012    65012     62831     62831      0     459   491     0       0     0    874   459        12 65.276317 65.286407
    3    28    1248    2014   152301   152301    146829    146829      0     319   333     0       0     0   2531   319        47 65.286407 65.214440
    4   164   10207    1400    99608    99608     96379     96379      0       2     2     0       0     0   1378     2       136 65.214440 65.212302
    5   138    8875       5      391      391       391       391      0       0     0     0       0     0      4     0         0 65.212302 0.000000
user_io:96901.540MB total_ios: 434870.469MB WriteAmplification: 4.4878
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82415.963 MB data into db.)


2025-01-06 18:32:14 ... thread 0: (100000000,799999999) ops and (88419.0,105193.0) ops/second in (1130.978330,7605.070840) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     205    1365        0        0    110752    110752      0     277  2155     0       0     0      0   277         0 0.000000 0.000000
    1     0       0     924   110648   110648     36069     36069      0     521   666     0       0     0     45   521        96 0.000000 65.275327
    2     5     228     981    74334    74334     71852     71852      0     525   561     0       0     0   1008   525        14 65.275327 65.282030
    3    30    1258    2333   174642   174642    168305    168305      0     377   394     0       0     0   2951   377        48 65.282030 65.196457
    4   164   10158    1740   121450   121450    117310    117310      0       4     5     0       0     0   1694     4       173 65.196457 65.186659
    5   178   11363      25     1700     1700      1699      1699      0       0     0     0       0     0     23     0         0 65.186659 0.000000
user_io:110751.938MB total_ios: 505986.876MB WriteAmplification: 4.5687
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96151.958 MB data into db.)


2025-01-06 18:49:43 ... thread 0: (100000000,899999999) ops and (95324.3,103996.7) ops/second in (1049.049945,8654.120785) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     154    1543        0        0    124654    124654      0     311  2427     0       0     0      0   311         0 0.000000 0.000000
    1     0       0    1044   124612   124612     40579     40579      0     588   751     0       0     0     50   588       108 0.000000 65.275574
    2     5     253    1109    83979    83979     81170     81170      0     593   631     0       0     0   1141   593        15 65.275574 65.286607
    3    28    1233    2627   196468   196468    189346    189346      0     434   456     0       0     0   3350   434        48 65.286607 65.196457
    4   165   10239    2030   142321   142321    137352    137352      0       5     6     0       0     0   1997     5       212 65.196457 65.192065
    5   218   13840      32     2222     2222      2221      2221      0       0     0     0       0     0     30     0         0 65.192065 0.000000
user_io:124653.709MB total_ios: 575321.758MB WriteAmplification: 4.6154
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109887.955 MB data into db.)


2025-01-06 19:09:12 ... thread 0: (100000000,999999999) ops and (85521.8,101797.6) ops/second in (1169.292158,9823.412943) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     103    1718        0        0    138555    138555      0     345  2699     0       0     0      0   345         0 0.000000 0.000000
    1     1      65    1160   138565   138565     45077     45077      0     653   839     0       0     0     50   653       122 0.000000 1.829395
    2     5     181    1234    93351    93351     90230     90230      0     661   702     0       0     0   1268   661        17 1.829395 65.276102
    3    29    1274    2924   218498   218498    210562    210562      0     486   510     0       0     0   3760   486        57 65.276102 65.276461
    4   171   10216    2330   164023   164023    158936    158936      0      52    55     0       0     0   2306    52       215 65.276461 10.920704
    5   248   15667     152    10772    10772      9355      9355      0       0     0     0       0     0    139     0         0 10.920704 0.000000
user_io:138555.431MB total_ios: 652715.355MB WriteAmplification: 4.7109
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123623.953 MB data into db.)


1000000000 operations have been finished (137359.952 MB data have been written into db)
fillzipf     :       9.823 micros/op 101797 ops/sec;   14.0 MB/s
Microseconds per op:
Count: 1000000000  Average: 9.8234  StdDev: 113.06
Percentiles: P50: 5.89 P75: 7.04 P99: 11.98 P99.9: 1143.43 P99.99: 1196.13
------------------------------------------------------
[       2,       3 )  245032   0.025%   0.025%
[       3,       4 ) 69650804   6.965%   6.990% #
[       4,       5 ) 179347275  17.935%  24.924% ####
[       5,       6 ) 281900468  28.190%  53.114% ######
[       6,       7 ) 214056542  21.406%  74.520% ####
[       7,       8 ) 126377392  12.638%  87.158% ###
[       8,       9 ) 66419208   6.642%  93.800% #
[       9,      10 ) 31667159   3.167%  96.966% #
[      10,      12 ) 20532142   2.053%  99.020%
[      12,      14 ) 3954657   0.395%  99.415%
[      14,      16 )  938022   0.094%  99.509%
[      16,      18 )  397294   0.040%  99.549%
[      18,      20 )  290341   0.029%  99.578%
[      20,      25 )  423645   0.042%  99.620%
[      25,      30 )  136673   0.014%  99.634%
[      30,      35 )   55824   0.006%  99.639%
[      35,      40 )   27850   0.003%  99.642%
[      40,      45 )   20163   0.002%  99.644%
[      45,      50 )   13003   0.001%  99.645%
[      50,      60 )   16823   0.002%  99.647%
[      60,      70 )   20756   0.002%  99.649%
[      70,      80 )   21095   0.002%  99.651%
[      80,      90 )    8572   0.001%  99.652%
[      90,     100 )    3953   0.000%  99.652%
[     100,     120 )    5745   0.001%  99.653%
[     120,     140 )    4112   0.000%  99.653%
[     140,     160 )    2010   0.000%  99.654%
[     160,     180 )    1396   0.000%  99.654%
[     180,     200 )    1299   0.000%  99.654%
[     200,     250 )    5448   0.001%  99.654%
[     250,     300 )    1514   0.000%  99.655%
[     300,     350 )     964   0.000%  99.655%
[     350,     400 )     769   0.000%  99.655%
[     400,     450 )     562   0.000%  99.655%
[     450,     500 )     419   0.000%  99.655%
[     500,     600 )     582   0.000%  99.655%
[     600,     700 )     346   0.000%  99.655%
[     700,     800 )     255   0.000%  99.655%
[     800,     900 )     213   0.000%  99.655%
[     900,    1000 )     168   0.000%  99.655%
[    1000,    1200 ) 3415516   0.342%  99.997%
[    1200,    1400 )    3226   0.000%  99.997%
[    1400,    1600 )    1308   0.000%  99.997%
[    1600,    1800 )     858   0.000%  99.997%
[    1800,    2000 )     625   0.000%  99.997%
[    2000,    2500 )    1083   0.000%  99.997%
[    2500,    3000 )     879   0.000%  99.997%
[    3000,    3500 )     832   0.000%  99.997%
[    3500,    4000 )     755   0.000%  99.998%
[    4000,    4500 )     813   0.000%  99.998%
[    4500,    5000 )     744   0.000%  99.998%
[    5000,    6000 )    1492   0.000%  99.998%
[    6000,    7000 )    1340   0.000%  99.998%
[    7000,    8000 )    1262   0.000%  99.998%
[    8000,    9000 )    1162   0.000%  99.998%
[    9000,   10000 )    1142   0.000%  99.998%
[   10000,   12000 )    2193   0.000%  99.999%
[   12000,   14000 )    2669   0.000%  99.999%
[   14000,   16000 )    2174   0.000%  99.999%
[   16000,   18000 )    1863   0.000%  99.999%
[   18000,   20000 )    1350   0.000%  99.999%
[   20000,   25000 )    2445   0.000% 100.000%
[   25000,   30000 )    1514   0.000% 100.000%
[   30000,   35000 )     958   0.000% 100.000%
[   35000,   40000 )     556   0.000% 100.000%
[   40000,   45000 )     304   0.000% 100.000%
[   45000,   50000 )     204   0.000% 100.000%
[   50000,   60000 )     172   0.000% 100.000%
[   60000,   70000 )      33   0.000% 100.000%
[   70000,   80000 )      18   0.000% 100.000%
[   80000,   90000 )       8   0.000% 100.000%
[   90000,  100000 )       4   0.000% 100.000%
[  100000,  120000 )       2   0.000% 100.000%
[  120000,  140000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        2      103      1718        0    138555
  1        1       65      1160   138565     45077
  2        5      181      1234    93351     90230
  3       29     1274      2924   218498    210562
  4      171    10216      2330   164023    158936
  5      248    15667       152    10772      9355
user_io:138555.431MB total_ios: 652715.355MB WriteAmplification: 4.7109

Checking if iostat process with PID 2437054 is still running...
    PID TTY          TIME CMD
2437054 pts/11   00:00:00 iostat
iostat process 2437054 is still running, killing now...
iostat process 2437054 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_zipf_C010.sh: line 47: 2437054 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_zipf${zipf_a}_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '2437055':

     12,935,981.02 msec task-clock                       #    1.317 CPUs utilized
         4,621,145      context-switches                 #  357.232 /sec
             4,849      cpu-migrations                   #    0.375 /sec
        18,586,929      page-faults                      #    1.437 K/sec
40,849,829,677,447      cycles                           #    3.158 GHz
83,163,226,924,097      instructions                     #    2.04  insn per cycle
11,781,215,852,436      branches                         #  910.732 M/sec
    29,565,945,483      branch-misses                    #    0.25% of all branches
                        TopdownL1                 #      1.6 %  tma_backend_bound
                                                  #     91.1 %  tma_bad_speculation
                                                  #      4.0 %  tma_frontend_bound
                                                  #      3.3 %  tma_retiring

    9823.008592137 seconds time elapsed

