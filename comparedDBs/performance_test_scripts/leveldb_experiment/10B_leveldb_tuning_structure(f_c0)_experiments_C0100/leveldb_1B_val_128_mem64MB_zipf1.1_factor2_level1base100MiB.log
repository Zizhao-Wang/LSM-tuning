base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Sat Jan  4 12:43:38 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_f2_1.1_mem64MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_f2_1.1_mem64MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 1504431
../../../leveldb/build_release_f_10_C0_100/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_f2_1.1_mem64MiB_level1base_100 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/zipf1.1_keys10.0B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0100/leveldb_zipf1.1_f2_memory_usage_1B_key16_val128_mem64MiB_factor2_level1base100MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/zipf1.1_keys10.0B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-04 12:53:26 ... thread 0: (99999999,99999999) ops and (170052.2,170052.2) ops/second in (588.054548,588.054548) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     154     158        0        0     13748     13748      0      50   265     0       0     0      0    50         0 0.000000 0.000000
    1     2     112     153    17280    17280      8061      8061      0      49    53     0       0     0     78    49        17 0.000000 65.272867
    2     5     314     101     8185     8185      7914      7914      0      37    41     0       0     0     92    37        21 65.272867 65.234760
    3    10     630      84     6696     6696      6266      6266      0      19    19     0       0     0     78    19        25 65.234760 65.184917
    4    17     979      45     3493     3493      3354      3354      0       0     0     0       0     0     44     0        23 65.184917 65.191288
    5    23    1501       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.191288 0.000000
user_io:13747.805MB total_ios: 39343.537MB WriteAmplification: 2.8618
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-04 13:05:21 ... thread 0: (100000000,199999999) ops and (139824.2,153463.9) ops/second in (715.183720,1303.238268) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     205     322        0        0     27650     27650      0      88   535     0       0     0      0    88         0 0.000000 0.000000
    1     4     201     338    35956    35956     17112     17112      0      83    88     0       0     0    172    83        50 0.000000 65.269599
    2     4     209     183    14445    14445     13833     13833      0      69    78     0       0     0    164    69        51 65.269599 65.286342
    3     8     459     166    13116    13116     12409     12409      0      52    55     0       0     0    157    52        47 65.286342 65.277623
    4    12     744     138    10603    10603     10257     10257      0      38    38     0       0     0    128    38        44 65.277623 65.239062
    5    24    1548      83     6514     6514      6327      6327      0       0     0     0       0     0     86     0        55 65.239062 65.192966
    6    55    3588       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.192966 0.000000
user_io:27649.512MB total_ios: 87587.662MB WriteAmplification: 3.1678
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13735.996 MB data into db.)


2025-01-04 13:16:58 ... thread 0: (100000000,299999999) ops and (143466.2,149980.0) ops/second in (697.028094,2000.266362) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     308     491        0        0     41551     41551      0     126   804     0       0     0      0   126         0 0.000000 0.000000
    1     3     177     515    54029    54029     25639     25639      0     119   125     0       0     0    254   119        81 0.000000 65.283273
    2     4     252     264    20650    20650     19786     19786      0     111   131     0       0     0    225   111        67 65.283273 65.243641
    3    11     695     275    21437    21437     20260     20260      0      72    77     0       0     0    256    72        77 65.243641 65.191735
    4    25    1557     189    14584    14584     14077     14077      0      67    68     0       0     0    171    67        52 65.191735 26.491197
    5    45    2872     155    12027    12027     11631     11631      0       8     8     0       0     0    156     8        59 26.491197 51.020808
    6    63    4031      14     1290     1290       964       964      0       0     0     0       0     0     17     0         0 51.020808 0.000000
user_io:41551.176MB total_ios: 133908.110MB WriteAmplification: 3.2227
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27471.990 MB data into db.)


2025-01-04 13:30:42 ... thread 0: (100000000,399999999) ops and (121409.7,141646.9) ops/second in (823.657238,2823.923600) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256     657        0        0     55402     55402      0     160  1075     0       0     0      0   160         0 0.000000 0.000000
    1     3     134     713    73033    73033     34979     34979      0     153   159     0       0     0    351   153       116 0.000000 65.219610
    2     6     341     345    27065    27065     25817     25817      0     148   174     0       0     0    293   148        89 65.219610 65.286923
    3    14     845     368    28502    28502     27015     27015      0     101   109     0       0     0    347   101        98 65.286923 49.901410
    4    25    1493     262    20208    20208     19353     19353      0      98    99     0       0     0    246    98        67 49.901410 65.263960
    5    47    2963     237    18449    18449     17820     17820      0      50    50     0       0     0    226    50        59 65.263960 51.020808
    6   103    6697     114     8866     8866      8466      8466      0       0     0     0       0     0    104     0         0 51.020808 0.000000
user_io:55401.595MB total_ios: 188852.051MB WriteAmplification: 3.4088
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41207.983 MB data into db.)


2025-01-04 13:44:22 ... thread 0: (100000000,499999999) ops and (121863.7,137192.5) ops/second in (820.589212,3644.512812) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     359     826        0        0     69303     69303      0     194  1344     0       0     0      0   194         0 0.000000 0.000000
    1     2     131     911    92018    92018     44318     44318      0     186   192     0       0     0    449   186       151 0.000000 65.286097
    2     6     360     428    33460    33460     31874     31874      0     187   217     0       0     0    361   187       113 65.286097 65.259776
    3    13     734     467    35984    35984     34177     34177      0     132   141     0       0     0    444   132       121 65.259776 37.373907
    4    23    1464     349    26725    26725     25770     25770      0     114   117     0       0     0    318   114       103 37.373907 65.272884
    5    48    3013     279    21433    21433     20526     20526      0      99   100     0       0     0    261    99        59 65.272884 51.020808
    6   142    9207     229    18005    18005     16924     16924      0       0     0     0       0     0    215     0         0 51.020808 0.000000
user_io:69303.310MB total_ios: 242893.187MB WriteAmplification: 3.5048
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54943.976 MB data into db.)


2025-01-04 13:59:23 ... thread 0: (100000000,599999999) ops and (111041.1,132010.9) ops/second in (900.567497,4545.080309) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     308     994        0        0     83205     83205      0     228  1616     0       0     0      0   228         0 0.000000 0.000000
    1     3     176    1123   111873   111873     54393     54393      0     216   222     0       0     0    552   216       188 0.000000 65.223883
    2     6     335     510    39889    39889     37939     37939      0     227   261     0       0     0    434   227       134 65.223883 9.224233
    3    14     793     564    43421    43421     41319     41319      0     160   169     0       0     0    534   160       147 9.224233 65.286731
    4    26    1538     424    32402    32402     31286     31286      0     158   163     0       0     0    388   158       107 65.286731 65.269191
    5    50    3192     393    30088    30088     28770     28770      0     139   140     0       0     0    366   139        59 65.269191 51.020808
    6   181   11754     353    27452    27452     26308     26308      0       0     0     0       0     0    333     0         0 51.020808 0.000000
user_io:83205.043MB total_ios: 303221.017MB WriteAmplification: 3.6443
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68679.969 MB data into db.)


2025-01-04 14:13:16 ... thread 0: (100000000,699999999) ops and (120096.1,130166.0) ops/second in (832.666190,5377.746499) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     256    1166        0        0     97107     97107      0     262  1888     0       0     0      0   262         0 0.000000 0.000000
    1     3     162    1326   131456   131456     64188     64188      0     247   253     0       0     0    651   247       225 0.000000 65.182687
    2     7     400     588    46025    46025     43756     43756      0     265   304     0       0     0    501   265       157 65.182687 65.235285
    3    14     828     663    50898    50898     48455     48455      0     190   200     0       0     0    625   190       171 65.235285 65.285829
    4    25    1567     504    38378    38378     37144     37144      0     169   174     0       0     0    467   169       148 65.285829 65.278172
    5    52    3168     420    32055    32055     30668     30668      0     188   189     0       0     0    394   188        59 65.278172 51.020808
    6   217   14066     502    39635    39635     37578     37578      0       0     0     0       0     0    491     0         0 51.020808 0.000000
user_io:97106.726MB total_ios: 358896.420MB WriteAmplification: 3.6959
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82415.963 MB data into db.)


2025-01-04 14:28:48 ... thread 0: (100000000,799999999) ops and (107263.9,126782.3) ops/second in (932.280339,6310.026838) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     154    1339        0        0    110957    110957      0     296  2160     0       0     0      0   296         0 0.000000 0.000000
    1     3     196    1543   151539   151539     74440     74440      0     277   283     0       0     0    754   277       263 0.000000 65.266772
    2     7     391     670    52498    52498     49895     49895      0     300   346     0       0     0    575   300       181 65.266772 65.193763
    3    13     787     747    57341    57341     54620     54620      0     214   225     0       0     0    709   214       200 65.193763 65.272060
    4    26    1625     567    43269    43269     41785     41785      0     206   212     0       0     0    519   206       161 65.272060 65.235235
    5    51    3120     513    38892    38892     37240     37240      0     234   235     0       0     0    500   234        59 65.235235 51.020808
    6   262   17005     691    53517    53517     51396     51396      0       0     0     0       0     0    688     0         0 51.020808 0.000000
user_io:110957.123MB total_ios: 420333.548MB WriteAmplification: 3.7883
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96151.958 MB data into db.)


2025-01-04 14:43:28 ... thread 0: (100000000,899999999) ops and (113640.0,125173.9) ops/second in (879.971746,7189.998584) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     103    1506        0        0    124859    124859      0     330  2432     0       0     0      0   330         0 0.000000 0.000000
    1     4     208    1751   171476   171476     84535     84535      0     306   313     0       0     0    857   306       299 0.000000 65.179795
    2     7     400     752    58939    58939     56049     56049      0     331   384     0       0     0    646   331       209 65.179795 65.270406
    3    14     754     825    63348    63348     60344     60344      0     242   255     0       0     0    787   242       226 65.270406 65.246988
    4    25    1556     642    48930    48930     47221     47221      0     245   252     0       0     0    594   245       174 65.246988 65.191035
    5    53    3167     613    46794    46794     44694     44694      0     279   280     0       0     0    616   279        59 65.191035 51.020808
    6   289   18770     834    65112    65112     61854     61854      0       0     0     0       0     0    854     0         0 51.020808 0.000000
user_io:124858.895MB total_ios: 479555.924MB WriteAmplification: 3.8408
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109887.955 MB data into db.)


2025-01-04 14:59:00 ... thread 0: (100000000,999999999) ops and (107216.3,123111.9) ops/second in (932.694133,8122.692717) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      51    1672        0        0    138761    138761      0     364  2704     0       0     0      0   364         0 0.000000 0.000000
    1     4     197    1964   191699   191699     94947     94947      0     337   344     0       0     0    961   337       337 0.000000 65.241520
    2     9     521     835    65424    65424     62203     62203      0     370   425     0       0     0    720   370       234 65.241520 65.257882
    3    15     788     915    70187    70187     66906     66906      0     268   283     0       0     0    881   268       251 65.257882 65.236020
    4    25    1583     710    54139    54139     52235     52235      0     274   282     0       0     0    657   274       193 65.236020 65.205188
    5    54    3121     648    49467    49467     47356     47356      0     333   334     0       0     0    633   333        59 65.205188 51.020808
    6   342   21866    1080    83676    83676     80310     80310      0       0     0     0       0     0   1097     0         0 51.020808 0.000000
user_io:138760.616MB total_ios: 542718.851MB WriteAmplification: 3.9112
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123623.953 MB data into db.)


1000000000 operations have been finished (137359.952 MB data have been written into db)
fillzipf     :       8.123 micros/op 123111 ops/sec;   16.9 MB/s
Microseconds per op:
Count: 1000000000  Average: 8.1227  StdDev: 87.06
Percentiles: P50: 5.59 P75: 6.48 P99: 10.01 P99.9: 1119.39 P99.99: 1193.44
------------------------------------------------------
[       2,       3 )  262542   0.026%   0.026%
[       3,       4 ) 76490311   7.649%   7.675% ##
[       4,       5 ) 217572305  21.757%  29.433% ####
[       5,       6 ) 350974224  35.097%  64.530% #######
[       6,       7 ) 218388602  21.839%  86.369% ####
[       7,       8 ) 86646981   8.665%  95.033% ##
[       8,       9 ) 29548132   2.955%  97.988% #
[       9,      10 ) 10103621   1.010%  98.999%
[      10,      12 ) 5081738   0.508%  99.507%
[      12,      14 )  988685   0.099%  99.606%
[      14,      16 )  377930   0.038%  99.644%
[      16,      18 )  238136   0.024%  99.667%
[      18,      20 )  219804   0.022%  99.689%
[      20,      25 )  369557   0.037%  99.726%
[      25,      30 )  125432   0.013%  99.739%
[      30,      35 )   44704   0.004%  99.743%
[      35,      40 )   19116   0.002%  99.745%
[      40,      45 )    9678   0.001%  99.746%
[      45,      50 )    5486   0.001%  99.747%
[      50,      60 )   26039   0.003%  99.749%
[      60,      70 )   18116   0.002%  99.751%
[      70,      80 )    4124   0.000%  99.752%
[      80,      90 )    5782   0.001%  99.752%
[      90,     100 )    2210   0.000%  99.752%
[     100,     120 )    4458   0.000%  99.753%
[     120,     140 )    3691   0.000%  99.753%
[     140,     160 )    2055   0.000%  99.753%
[     160,     180 )    1865   0.000%  99.754%
[     180,     200 )    2116   0.000%  99.754%
[     200,     250 )    6772   0.001%  99.754%
[     250,     300 )    1241   0.000%  99.755%
[     300,     350 )     882   0.000%  99.755%
[     350,     400 )     731   0.000%  99.755%
[     400,     450 )     447   0.000%  99.755%
[     450,     500 )     284   0.000%  99.755%
[     500,     600 )     377   0.000%  99.755%
[     600,     700 )     259   0.000%  99.755%
[     700,     800 )     184   0.000%  99.755%
[     800,     900 )     150   0.000%  99.755%
[     900,    1000 )     119   0.000%  99.755%
[    1000,    1200 ) 2430793   0.243%  99.998%
[    1200,    1400 )    1808   0.000%  99.998%
[    1400,    1600 )     856   0.000%  99.998%
[    1600,    1800 )     491   0.000%  99.998%
[    1800,    2000 )     355   0.000%  99.998%
[    2000,    2500 )     743   0.000%  99.998%
[    2500,    3000 )     591   0.000%  99.998%
[    3000,    3500 )     514   0.000%  99.999%
[    3500,    4000 )     544   0.000%  99.999%
[    4000,    4500 )     509   0.000%  99.999%
[    4500,    5000 )     578   0.000%  99.999%
[    5000,    6000 )     960   0.000%  99.999%
[    6000,    7000 )     938   0.000%  99.999%
[    7000,    8000 )     817   0.000%  99.999%
[    8000,    9000 )     826   0.000%  99.999%
[    9000,   10000 )     717   0.000%  99.999%
[   10000,   12000 )    1375   0.000%  99.999%
[   12000,   14000 )    1416   0.000%  99.999%
[   14000,   16000 )    1140   0.000%  99.999%
[   16000,   18000 )    1073   0.000% 100.000%
[   18000,   20000 )     817   0.000% 100.000%
[   20000,   25000 )    1371   0.000% 100.000%
[   25000,   30000 )     747   0.000% 100.000%
[   30000,   35000 )     522   0.000% 100.000%
[   35000,   40000 )     272   0.000% 100.000%
[   40000,   45000 )     119   0.000% 100.000%
[   45000,   50000 )     117   0.000% 100.000%
[   50000,   60000 )      70   0.000% 100.000%
[   60000,   70000 )      26   0.000% 100.000%
[   70000,   80000 )       8   0.000% 100.000%
[  250000,  300000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        1       51      1672        0    138761
  1        4      197      1964   191699     94947
  2        9      521       835    65424     62203
  3       15      788       915    70187     66906
  4       25     1583       710    54139     52235
  5       54     3121       648    49467     47356
  6      342    21866      1080    83676     80310
user_io:138760.616MB total_ios: 542718.851MB WriteAmplification: 3.9112

Checking if iostat process with PID 1504430 is still running...
    PID TTY          TIME CMD
1504430 pts/5    00:00:00 iostat
iostat process 1504430 is still running, killing now...
iostat process 1504430 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_zipf_C0100.sh: line 45: 1504430 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_zipf${zipf_a}_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '1504431':

     11,331,552.58 msec task-clock                       #    1.395 CPUs utilized
         3,262,567      context-switches                 #  287.919 /sec
             2,339      cpu-migrations                   #    0.206 /sec
        16,833,832      page-faults                      #    1.486 K/sec
36,342,556,159,079      cycles                           #    3.207 GHz
75,882,407,254,991      instructions                     #    2.09  insn per cycle
10,793,290,787,545      branches                         #  952.499 M/sec
    29,083,879,151      branch-misses                    #    0.27% of all branches
                        TopdownL1                 #      3.0 %  tma_backend_bound
                                                  #     87.8 %  tma_bad_speculation
                                                  #      4.8 %  tma_frontend_bound
                                                  #      4.4 %  tma_retiring

    8122.333295871 seconds time elapsed
