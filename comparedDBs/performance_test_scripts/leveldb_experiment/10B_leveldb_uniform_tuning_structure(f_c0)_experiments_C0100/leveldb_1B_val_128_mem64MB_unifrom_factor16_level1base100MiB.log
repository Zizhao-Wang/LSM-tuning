base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Sun Jan 12 21:38:27 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f16_mem64MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f16_mem64MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 3371885
../../../leveldb/build_release_f_16_C0_100/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f16_mem64MiB_level1base_100 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/uniform_read_keys16_value128_1B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0100/leveldb_uniform_f16_memory_usage_1B_key16_val128_mem64MiB_factor16_level1base100MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/uniform_read_keys16_value128_1B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-12 22:01:46 ... thread 0: (99999999,99999999) ops and (71479.8,71479.8) ops/second in (1398.996191,1398.996191) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     135        0        0     14002     14002      0      35   268     0       0     0      0    35         0 0.000000 0.000000
    1    11     593     269    19726    19726     19644     19644      0     212   236     0       0     0    120   212         5 0.000000 65.260336
    2    56    3137     789    69599    69599     69332     69332      0      70    72     0       0     0    961    70        88 65.260336 28.732653
    3   153    9763     173    15620    15620     15460     15460      0       0     0     0       0     0    195     0         0 28.732653 0.000000
user_io:14001.624MB total_ios: 118437.824MB WriteAmplification: 8.4589
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-12 22:34:30 ... thread 0: (100000000,199999999) ops and (50924.3,59476.1) ops/second in (1963.698867,3362.695058) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     366     270        0        0     28160     28160      0      68   532     0       0     0      0    68         0 0.000000 0.000000
    1     8     471     535    39125    39125     38910     38910      0     447   486     0       0     0    241   447         7 0.000000 7.469176
    2    66    3282    1703   148915   148915    148284    148284      0     283   298     0       0     0   2276   283        88 7.469176 28.732653
    3   341   21764     784    70799    70799     69368     69368      0       0     0     0       0     0    921     0         0 28.732653 0.000000
user_io:28159.986MB total_ios: 284721.246MB WriteAmplification: 10.1108
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13732.910 MB data into db.)


2025-01-12 23:12:42 ... thread 0: (100000000,299999999) ops and (43636.6,53056.5) ops/second in (2291.651662,5654.346720) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313     407        0        0     42318     42318      0     102   804     0       0     0      0   102         0 0.000000 0.000000
    1     9     513     812    59206    59206     58852     58852      0     691   742     0       0     0    366   691         7 0.000000 7.469176
    2    74    3222    2645   229823   229823    228808    228808      0     516   549     0       0     0   3779   516        88 7.469176 28.732653
    3   523   32972    1683   151361   151361    147431    147431      0       0     0     0       0     0   2035     0         0 28.732653 0.000000
user_io:42318.350MB total_ios: 477409.363MB WriteAmplification: 11.2814
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27465.820 MB data into db.)


2025-01-12 23:53:18 ... thread 0: (100000000,399999999) ops and (41051.8,49441.9) ops/second in (2435.949401,8090.296121) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     209     541        0        0     56424     56424      0     136  1076     0       0     0      0   136         0 0.000000 0.000000
    1     8     386    1083    79107    79107     78616     78616      0     937  1003     0       0     0    489   937         7 0.000000 7.469176
    2    85    3386    3558   309480   309480    308088    308088      0     751   809     0       0     0   5480   751        88 7.469176 28.732653
    3   687   43069    2760   249723   249723    242232    242232      0       0     0     0       0     0   3430     0         0 28.732653 0.000000
user_io:56424.465MB total_ios: 685359.583MB WriteAmplification: 12.1465
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41198.730 MB data into db.)


2025-01-13 00:37:45 ... thread 0: (100000000,499999999) ops and (37489.7,46478.4) ops/second in (2667.398726,10757.694847) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     157     675        0        0     70583     70583      0     170  1348     0       0     0      0   170         0 0.000000 0.000000
    1    10     527    1353    99029    99029     98400     98400      0    1176  1260     0       0     0    608  1176         7 0.000000 7.469176
    2    95    3263    4457   388404   388404    386635    386635      0    1033  1095     0       0     0   7351  1033        88 7.469176 28.732653
    3   815   51177    4075   370974   370974    358949    358949      0       0     0     0       0     0   5209     0        16 28.732653 65.285800
    4    16    1037       0        0        0         0         0      0       0     0     0       0     0      0     0         0 65.285800 0.000000
user_io:70582.823MB total_ios: 914566.938MB WriteAmplification: 12.9574
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54931.641 MB data into db.)


2025-01-13 01:24:21 ... thread 0: (100000000,599999999) ops and (35766.2,44268.6) ops/second in (2795.933948,13553.628795) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     104     811        0        0     84741     84741      0     204  1620     0       0     0      0   204         0 0.000000 0.000000
    1    10     515    1626   119066   119066    118300    118300      0    1428  1520     0       0     0    733  1428         7 0.000000 7.469176
    2    97    3224    5374   468235   468235    466085    466085      0    1331  1403     0       0     0   9264  1331        96 7.469176 65.272823
    3   814   51165    5484   499653   499653    482719    482719      0       3     3     0       0     0   7121     3       152 65.272823 65.284636
    4   154    9843      11     1046     1046      1008      1008      0       0     0     0       0     0     14     0         0 65.284636 0.000000
user_io:84741.175MB total_ios: 1152852.709MB WriteAmplification: 13.6044
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68664.551 MB data into db.)


2025-01-13 02:12:20 ... thread 0: (100000000,699999999) ops and (34730.7,42597.4) ops/second in (2879.297464,16432.926259) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      52     955        0        0     98900     98900      0     238  1892     0       0     0      0   238         0 0.000000 0.000000
    1    12     608    1906   138943   138943    138040    138040      0    1677  1776     0       0     0    854  1677         7 0.000000 7.469176
    2    85    3145    6343   549062   549062    546531    546531      0    1588  1726     0       0     0  11160  1588       100 7.469176 15.046587
    3   832   51199    6910   624964   624964    603178    603178      0       6     7     0       0     0   8970     6       290 15.046587 65.284242
    4   295   18615      19     1732     1732      1673      1673      0       0     0     0       0     0     22     0         0 65.284242 0.000000
user_io:98899.538MB total_ios: 1388321.569MB WriteAmplification: 14.0377
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82397.461 MB data into db.)


2025-01-13 02:57:58 ... thread 0: (100000000,799999999) ops and (36525.7,41730.3) ops/second in (2737.801291,19170.727550) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     366    1098        0        0    113006    113006      0     271  2156     0       0     0      0   271         0 0.000000 0.000000
    1     9     477    2184   158448   158448    157411    157411      0    1916  2025     0       0     0    974  1916         8 0.000000 2.792373
    2    82    3300    7288   627853   627853    624948    624948      0    1811  1989     0       0     0  12953  1811       101 2.792373 1.437241
    3   833   51195    8230   740159   740159    713794    713794      0       7     8     0       0     0  10676     7       428 1.437241 65.283949
    4   434   27298      21     1928     1928      1865      1865      0       0     0     0       0     0     24     0         0 65.283949 0.000000
user_io:113005.655MB total_ios: 1611022.569MB WriteAmplification: 14.2561
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96130.371 MB data into db.)


2025-01-13 03:46:08 ... thread 0: (100000000,899999999) ops and (34598.1,40795.9) ops/second in (2890.330497,22061.058047) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313    1242        0        0    127164    127164      0     305  2428     0       0     0      0   305         0 0.000000 0.000000
    1     8     375    2470   178428   178428    177253    177253      0    2162  2280     0       0     0   1096  2162         9 0.000000 65.260367
    2    85    3401    8257   707347   707347    704064    704064      0    2047  2237     0       0     0  14855  2047       101 65.260367 1.437241
    3   831   51150    9661   861852   861852    830700    830700      0       9    10     0       0     0  12484     9       568 1.437241 65.285631
    4   576   36198      37     3276     3276      3160      3160      0       0     0     0       0     0     43     0         0 65.285631 0.000000
user_io:127164.013MB total_ios: 1842341.452MB WriteAmplification: 14.4879
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109863.281 MB data into db.)


2025-01-13 04:34:33 ... thread 0: (100000000,999999999) ops and (34426.2,40054.8) ops/second in (2904.761065,24965.819112) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     261    1387        0        0    141322    141322      0     339  2700     0       0     0      0   339         0 0.000000 0.000000
    1    11     551    2757   198455   198455    197142    197142      0    2406  2538     0       0     0   1219  2406         9 0.000000 65.260367
    2    71    3201    9227   786964   786964    783302    783302      0    2299  2494     0       0     0  16733  2299       102 65.260367 36.732776
    3   841   51200   11095   984921   984921    949034    949034      0      12    13     0       0     0  14336    12       709 36.732776 65.284345
    4   719   45096      53     4649     4649      4499      4499      0       0     0     0       0     0     62     0         0 65.284345 0.000000
user_io:141322.374MB total_ios: 2075298.783MB WriteAmplification: 14.6849
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123596.191 MB data into db.)


1000000000 operations have been finished (137329.102 MB data have been written into db)
fillzipf     :      24.966 micros/op 40054 ops/sec;    5.5 MB/s
Microseconds per op:
Count: 1000000000  Average: 24.9658  StdDev: 151.09
Percentiles: P50: 6.04 P75: 7.08 P99: 1084.07 P99.9: 1188.62 P99.99: 1199.07
------------------------------------------------------
[       2,       3 )   86660   0.009%   0.009%
[       3,       4 ) 14523846   1.452%   1.461%
[       4,       5 ) 157944017  15.794%  17.255% ###
[       5,       6 ) 317925394  31.793%  49.048% ######
[       6,       7 ) 249745571  24.975%  74.023% #####
[       7,       8 ) 129374960  12.937%  86.960% ###
[       8,       9 ) 59134504   5.913%  92.873% #
[       9,      10 ) 27378012   2.738%  95.611% #
[      10,      12 ) 19572610   1.957%  97.569%
[      12,      14 ) 4537292   0.454%  98.022%
[      14,      16 ) 1114673   0.111%  98.134%
[      16,      18 )  387708   0.039%  98.173%
[      18,      20 )  255643   0.026%  98.198%
[      20,      25 )  428034   0.043%  98.241%
[      25,      30 )  163297   0.016%  98.257%
[      30,      35 )   62542   0.006%  98.263%
[      35,      40 )   29435   0.003%  98.266%
[      40,      45 )   16237   0.002%  98.268%
[      45,      50 )   10159   0.001%  98.269%
[      50,      60 )   18674   0.002%  98.271%
[      60,      70 )    8795   0.001%  98.272%
[      70,      80 )   11447   0.001%  98.273%
[      80,      90 )    7579   0.001%  98.274%
[      90,     100 )    3904   0.000%  98.274%
[     100,     120 )    4553   0.000%  98.275%
[     120,     140 )    3015   0.000%  98.275%
[     140,     160 )    1600   0.000%  98.275%
[     160,     180 )    1101   0.000%  98.275%
[     180,     200 )    1046   0.000%  98.275%
[     200,     250 )    5068   0.001%  98.276%
[     250,     300 )     953   0.000%  98.276%
[     300,     350 )     624   0.000%  98.276%
[     350,     400 )     690   0.000%  98.276%
[     400,     450 )     479   0.000%  98.276%
[     450,     500 )     292   0.000%  98.276%
[     500,     600 )     700   0.000%  98.276%
[     600,     700 )     671   0.000%  98.276%
[     700,     800 )     387   0.000%  98.276%
[     800,     900 )     228   0.000%  98.276%
[     900,    1000 )     105   0.000%  98.276%
[    1000,    1200 ) 17217603   1.722%  99.998%
[    1200,    1400 )    7308   0.001%  99.999%
[    1400,    1600 )    2641   0.000%  99.999%
[    1600,    1800 )    1252   0.000%  99.999%
[    1800,    2000 )     630   0.000%  99.999%
[    2000,    2500 )     369   0.000%  99.999%
[    2500,    3000 )     219   0.000%  99.999%
[    3000,    3500 )     221   0.000%  99.999%
[    3500,    4000 )     256   0.000%  99.999%
[    4000,    4500 )     145   0.000%  99.999%
[    4500,    5000 )     221   0.000%  99.999%
[    5000,    6000 )     463   0.000%  99.999%
[    6000,    7000 )     409   0.000%  99.999%
[    7000,    8000 )     401   0.000%  99.999%
[    8000,    9000 )     402   0.000% 100.000%
[    9000,   10000 )     326   0.000% 100.000%
[   10000,   12000 )     677   0.000% 100.000%
[   12000,   14000 )     674   0.000% 100.000%
[   14000,   16000 )     662   0.000% 100.000%
[   16000,   18000 )     602   0.000% 100.000%
[   18000,   20000 )     500   0.000% 100.000%
[   20000,   25000 )     643   0.000% 100.000%
[   25000,   30000 )     363   0.000% 100.000%
[   30000,   35000 )     260   0.000% 100.000%
[   35000,   40000 )     126   0.000% 100.000%
[   40000,   45000 )      73   0.000% 100.000%
[   45000,   50000 )      41   0.000% 100.000%
[   50000,   60000 )       8   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        5      261      1387        0    141322
  1       11      551      2757   198455    197142
  2       71     3201      9227   786964    783302
  3      841    51200     11095   984921    949034
  4      719    45096        53     4649      4499
user_io:141322.374MB total_ios: 2075298.783MB WriteAmplification: 14.6849

Checking if iostat process with PID 3371884 is still running...
    PID TTY          TIME CMD
3371884 pts/1    00:00:00 iostat
iostat process 3371884 is still running, killing now...
iostat process 3371884 has been successfully killed.
Log file leveldb_1B_val_128_mem64MB_unifrom_factor32_level1base100MiB.log already exists. Skipping this iteration.
./leveldb_script_uniform_C0100.sh: line 127: 3371884 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_uniform_IOstats_factor${F}_level1base${level1base}MiB.log
root@jeffwang-NF5280M6:/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment#
 Performance counter stats for process id '3371885':

     27,322,646.04 msec task-clock                       #    1.094 CPUs utilized
        21,418,148      context-switches                 #  783.897 /sec
             8,314      cpu-migrations                   #    0.304 /sec
        38,142,520      page-faults                      #    1.396 K/sec
86,520,348,568,945      cycles                           #    3.167 GHz
193,751,179,998,550      instructions                     #    2.24  insn per cycle
27,311,089,938,395      branches                         #  999.577 M/sec
    50,689,127,346      branch-misses                    #    0.19% of all branches
                        TopdownL1                 #      1.1 %  tma_backend_bound
                                                  #     89.5 %  tma_bad_speculation
                                                  #      4.5 %  tma_frontend_bound
                                                  #      4.9 %  tma_retiring

   24965.456833389 seconds time elapsed
