base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Tue Jan  7 23:16:41 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f2_mem64MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f2_mem64MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 2960192
../../../leveldb/build_release_f_2_C0_100/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f2_mem64MiB_level1base_100 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/uniform_read_keys16_value128_1B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0100/leveldb_uniform_f2_memory_usage_1B_key16_val128_mem64MiB_factor2_level1base100MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/uniform_read_keys16_value128_1B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-07 23:36:09 ... thread 0: (99999999,99999999) ops and (85652.7,85652.7) ops/second in (1167.505354,1167.505354) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7     366     141        0        0     14002     14002      0      36   261     0       0     0      0    36         0 0.000000 0.000000
    1     4     218     266    18867    18867     18794     18794      0      39    53     0       0     0     89    39       158 0.000000 65.260654
    2     7     456      76     6335     6335      6377      6377      0      95   105     0       0     0     46    95       100 65.260654 65.260761
    3    14     859     225    18773    18773     18713     18713      0      76    81     0       0     0    198    76       106 65.260761 65.270135
    4    27    1760     164    13934    13934     13875     13875      0      64    66     0       0     0    145    64        93 65.270135 65.266747
    5    49    3176     157    13033    13033     12933     12933      0      55    55     0       0     0    155    55        51 65.266747 61.376637
    6   106    6856      97     8413     8413      8354      8354      0       0     0     0       0     0     88     0         0 61.376637 0.000000
user_io:14001.624MB total_ios: 93046.802MB WriteAmplification: 6.6454
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-08 00:07:03 ... thread 0: (100000000,199999999) ops and (53923.3,66181.5) ops/second in (1854.487041,3021.992395) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313     282        0        0     28160     28160      0      70   533     0       0     0      0    70         0 0.000000 0.000000
    1     4     218     552    39002    39002     38790     38790      0      73    98     0       0     0    191    73       334 0.000000 65.259964
    2    10     632     139    11490    11490     11525     11525      0     208   226     0       0     0     80   208       197 65.259964 65.260362
    3    14     884     496    41456    41456     41322     41322      0     167   176     0       0     0    439   167       228 65.260362 65.267003
    4    25    1580     378    31891    31891     31741     31741      0     182   189     0       0     0    343   182       186 65.267003 64.722013
    5    54    3184     424    35448    35448     35156     35156      0     266   267     0       0     0    423   266        51 64.722013 61.376637
    6   300   19476     671    57823    57823     56704     56704      0       0     0     0       0     0    735     0         0 61.376637 0.000000
user_io:28159.986MB total_ios: 243396.411MB WriteAmplification: 8.6433
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13732.910 MB data into db.)


2025-01-08 00:43:59 ... thread 0: (100000000,299999999) ops and (45123.2,57272.2) ops/second in (2216.152897,5238.145292) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     261     422        0        0     42318     42318      0     104   805     0       0     0      0   104         0 0.000000 0.000000
    1     4     218     834    59136    59136     58785     58785      0     107   140     0       0     0    293   107       513 0.000000 65.260806
    2     6     391     197    16450    16450     16477     16477      0     323   353     0       0     0    114   323       294 65.260806 65.260298
    3    14     886     771    64515    64515     64305     64305      0     258   272     0       0     0    677   258       355 65.260298 65.267429
    4    29    1837     611    51495    51495     51254     51254      0     382   392     0       0     0    561   382       200 65.267429 65.271839
    5    62    3192     799    67067    67067     66522     66522      0     475   487     0       0     0    855   475        51 65.271839 61.376637
    6   482   30862    1483   128516   128516    125165    125165      0       0     0     0       0     0   1701     0         0 61.376637 0.000000
user_io:42318.350MB total_ios: 424827.288MB WriteAmplification: 10.0388
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27465.820 MB data into db.)


2025-01-08 01:25:01 ... thread 0: (100000000,399999999) ops and (40624.8,51950.1) ops/second in (2461.553396,7699.698688) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     157     561        0        0     56424     56424      0     138  1077     0       0     0      0   138         0 0.000000 0.000000
    1     4     218    1118    79271    79271     78781     78781      0     141   185     0       0     0    395   141       689 0.000000 65.260479
    2     7     456     257    21606    21606     21625     21625      0     433   474     0       0     0    148   433       393 65.260479 44.615088
    3    16    1020    1043    87424    87424     87142     87142      0     360   379     0       0     0    921   360       466 44.615088 65.266517
    4    26    1649     847    71531    71531     71190     71190      0     577   589     0       0     0    781   577       218 65.266517 65.273707
    5    92    3192    1082    91221    91221     90512     90512      0     716   743     0       0     0   1163   716        51 65.273707 61.376637
    6   659   41191    2619   227855   227855    221117    221117      0       0     0     0       0     0   3107     0         0 61.376637 0.000000
user_io:56424.465MB total_ios: 626792.138MB WriteAmplification: 11.1085
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41198.730 MB data into db.)


2025-01-08 02:11:40 ... thread 0: (100000000,499999999) ops and (35726.3,47624.7) ops/second in (2799.058592,10498.757280) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     104     700        0        0     70583     70583      0     172  1349     0       0     0      0   172         0 0.000000 0.000000
    1     4     218    1400    99405    99405     98777     98777      0     175   228     0       0     0    497   175       867 0.000000 65.260929
    2    10     632     316    26631    26631     26643     26643      0     542   598     0       0     0    182   542       488 65.260929 65.256416
    3    14     885    1324   111142   111142    110787    110787      0     449   472     0       0     0   1179   449       590 65.256416 65.267737
    4    25    1567    1069    90176    90176     89745     89745      0     791   805     0       0     0    982   791       219 65.267737 19.388657
    5    77    3141    1430   120693   120693    119753    119753      0     993  1048     0       0     0   1629   993        51 19.388657 61.376637
    6   807   50563    4028   351177   351177    340046    340046      0       0     0     0       0     0   4916     0         0 61.376637 0.000000
user_io:70582.823MB total_ios: 856333.315MB WriteAmplification: 12.1323
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54931.641 MB data into db.)


2025-01-08 03:00:14 ... thread 0: (100000000,599999999) ops and (34318.9,44734.1) ops/second in (2913.844482,13412.601762) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      52     841        0        0     84741     84741      0     206  1621     0       0     0      0   206         0 0.000000 0.000000
    1     5     283    1684   119540   119540    118773    118773      0     209   271     0       0     0    599   209      1044 0.000000 65.259868
    2    11     697     377    31656    31656     31660     31660      0     653   723     0       0     0    216   653       582 65.259868 65.260342
    3    12     756    1617   135437   135437    135008    135008      0     552   580     0       0     0   1439   552       702 65.260342 65.267142
    4    24    1551    1337   112594   112594    112059    112059      0    1002  1020     0       0     0   1234  1002       221 65.267142 19.305696
    5   104    3174    1738   146718   146718    145591    145591      0    1261  1352     0       0     0   2037  1261        51 19.305696 61.376637
    6   943   59007    5525   480428   480428    464061    464061      0       0     0     0       0     0   6809     0         0 61.376637 0.000000
user_io:84741.175MB total_ios: 1091893.075MB WriteAmplification: 12.8850
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68664.551 MB data into db.)


2025-01-08 03:52:42 ... thread 0: (100000000,699999999) ops and (31767.5,42269.3) ops/second in (3147.872385,16560.474147) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     8     418     981        0        0     98900     98900      0     239  1885     0       0     0      0   239         0 0.000000 0.000000
    1     3     196    1960   139060   139060    138159    138159      0     242   315     0       0     0    698   242      1216 0.000000 65.257444
    2     6     371     437    36681    36681     36678     36678      0     769   851     0       0     0    249   769       674 65.257444 65.256667
    3    12     777    1917   160479   160479    159974    159974      0     644   676     0       0     0   1707   644       825 65.256667 65.266849
    4    26    1632    1556   131080   131080    130454    130454      0    1215  1233     0       0     0   1436  1215       222 65.266849 5.286262
    5    79    3269    2085   175642   175642    174291    174291      0    1515  1624     0       0     0   2551  1515        51 5.286262 61.376637
    6  1061   66514    7261   630814   630814    608478    608478      0       0     0     0       0     0   9041     0         0 61.376637 0.000000
user_io:98899.538MB total_ios: 1346933.615MB WriteAmplification: 13.6192
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82397.461 MB data into db.)


2025-01-08 04:45:05 ... thread 0: (100000000,799999999) ops and (31817.0,40602.0) ops/second in (3142.973934,19703.448081) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313    1121        0        0    113006    113006      0     273  2157     0       0     0      0   273         0 0.000000 0.000000
    1     3     196    2245   159195   159195    158155    158155      0     276   357     0       0     0    800   276      1395 0.000000 65.258143
    2     6     371     496    41641    41641     41630     41630      0     875   975     0       0     0    283   875       771 65.258143 65.259748
    3    13     795    2200   183954   183954    183377    183377      0     738   776     0       0     0   1956   738       944 65.259748 65.267248
    4    26    1677    1788   150403   150403    149682    149682      0    1428  1447     0       0     0   1646  1428       224 65.267248 19.392945
    5   133    3417    2390   201238   201238    199696    199696      0    1783  1917     0       0     0   2976  1783        51 19.392945 61.376637
    6  1178   73346    9036   783922   783922    754922    754922      0       0     0     0       0     0  11304     0         0 61.376637 0.000000
user_io:113005.655MB total_ios: 1600468.554MB WriteAmplification: 14.1627
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96130.371 MB data into db.)


2025-01-08 05:43:22 ... thread 0: (100000000,899999999) ops and (28593.0,38791.8) ops/second in (3497.356218,23200.804299) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     261    1263        0        0    127164    127164      0     307  2429     0       0     0      0   307         0 0.000000 0.000000
    1     3     196    2531   179329   179329    178151    178151      0     310   403     0       0     0    902   310      1570 0.000000 65.258268
    2     7     436     558    46861    46861     46844     46844      0     984  1097     0       0     0    317   984       869 65.258268 65.260776
    3    13     821    2474   206643   206643    205993    205993      0     830   872     0       0     0   2196   830      1066 65.260776 65.267486
    4    28    1757    2012   169070   169070    168258    168258      0    1641  1660     0       0     0   1850  1641       225 65.267486 5.415826
    5    76    3214    2729   229479   229479    227714    227714      0    2058  2201     0       0     0   3548  2058        51 5.415826 61.376637
    6  1277   79608   11133   963879   963879    927431    927431      0       0     0     0       0     0  13973     0         0 61.376637 0.000000
user_io:127164.013MB total_ios: 1881554.151MB WriteAmplification: 14.7963
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109863.281 MB data into db.)


2025-01-08 06:43:01 ... thread 0: (100000000,999999999) ops and (27941.9,37341.8) ops/second in (3578.855216,26779.659515) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     209    1404        0        0    141322    141322      0     341  2701     0       0     0      0   341         0 0.000000 0.000000
    1     4     261    2815   199464   199464    198146    198146      0     344   443     0       0     0   1004   344      1750 0.000000 44.654661
    2    10     632     615    51691    51691     51665     51665      0    1098  1222     0       0     0    351  1098       962 44.654661 65.260525
    3    13     843    2757   230174   230174    229450    229450      0     922   969     0       0     0   2450   922      1184 65.260525 65.269980
    4    24    1539    2245   188543   188543    187640    187640      0    1852  1874     0       0     0   2065  1852       226 65.269980 19.361001
    5   137    3169    3025   254393   254393    252450    252450      0    2347  2509     0       0     0   3998  2347        51 19.361001 61.376637
    6  1371   85276   13336  1153852  1153852   1109371   1109371      0       0     0     0       0     0  16817     0         0 61.376637 0.000000
user_io:141322.374MB total_ios: 2170045.767MB WriteAmplification: 15.3553
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123596.191 MB data into db.)


1000000000 operations have been finished (137329.102 MB data have been written into db)
fillzipf     :      26.780 micros/op 37341 ops/sec;    5.1 MB/s
Microseconds per op:
Count: 1000000000  Average: 26.7797  StdDev: 161.71
Percentiles: P50: 5.85 P75: 6.75 P99: 1095.51 P99.9: 1189.79 P99.99: 1199.22
------------------------------------------------------
[       2,       3 )  101880   0.010%   0.010%
[       3,       4 ) 15763850   1.576%   1.587%
[       4,       5 ) 175920117  17.592%  19.179% ####
[       5,       6 ) 361763310  36.176%  55.355% #######
[       6,       7 ) 261862175  26.186%  81.541% #####
[       7,       8 ) 108574515  10.857%  92.399% ##
[       8,       9 ) 36550506   3.655%  96.054% #
[       9,      10 ) 11954919   1.195%  97.249%
[      10,      12 ) 5645589   0.565%  97.814%
[      12,      14 ) 1066491   0.107%  97.920%
[      14,      16 )  389668   0.039%  97.959%
[      16,      18 )  236585   0.024%  97.983%
[      18,      20 )  221308   0.022%  98.005%
[      20,      25 )  429482   0.043%  98.048%
[      25,      30 )  184129   0.018%  98.066%
[      30,      35 )   67592   0.007%  98.073%
[      35,      40 )   19517   0.002%  98.075%
[      40,      45 )    7622   0.001%  98.076%
[      45,      50 )    4552   0.000%  98.076%
[      50,      60 )   64349   0.006%  98.083%
[      60,      70 )   13698   0.001%  98.084%
[      70,      80 )    6312   0.001%  98.085%
[      80,      90 )    6952   0.001%  98.086%
[      90,     100 )    2351   0.000%  98.086%
[     100,     120 )    5186   0.001%  98.086%
[     120,     140 )    3403   0.000%  98.087%
[     140,     160 )    1682   0.000%  98.087%
[     160,     180 )    1645   0.000%  98.087%
[     180,     200 )    1677   0.000%  98.087%
[     200,     250 )    5297   0.001%  98.088%
[     250,     300 )    1297   0.000%  98.088%
[     300,     350 )     863   0.000%  98.088%
[     350,     400 )     714   0.000%  98.088%
[     400,     450 )     710   0.000%  98.088%
[     450,     500 )     647   0.000%  98.088%
[     500,     600 )    1131   0.000%  98.088%
[     600,     700 )     791   0.000%  98.088%
[     700,     800 )     477   0.000%  98.088%
[     800,     900 )     320   0.000%  98.088%
[     900,    1000 )     298   0.000%  98.088%
[    1000,    1200 ) 19090826   1.909%  99.997%
[    1200,    1400 )    8945   0.001%  99.998%
[    1400,    1600 )    3683   0.000%  99.999%
[    1600,    1800 )    1737   0.000%  99.999%
[    1800,    2000 )     845   0.000%  99.999%
[    2000,    2500 )     655   0.000%  99.999%
[    2500,    3000 )     213   0.000%  99.999%
[    3000,    3500 )     180   0.000%  99.999%
[    3500,    4000 )     192   0.000%  99.999%
[    4000,    4500 )     231   0.000%  99.999%
[    4500,    5000 )     293   0.000%  99.999%
[    5000,    6000 )     585   0.000%  99.999%
[    6000,    7000 )     576   0.000%  99.999%
[    7000,    8000 )     585   0.000%  99.999%
[    8000,    9000 )     605   0.000%  99.999%
[    9000,   10000 )     521   0.000%  99.999%
[   10000,   12000 )     946   0.000% 100.000%
[   12000,   14000 )     751   0.000% 100.000%
[   14000,   16000 )     598   0.000% 100.000%
[   16000,   18000 )     546   0.000% 100.000%
[   18000,   20000 )     486   0.000% 100.000%
[   20000,   25000 )     914   0.000% 100.000%
[   25000,   30000 )     584   0.000% 100.000%
[   30000,   35000 )     362   0.000% 100.000%
[   35000,   40000 )     182   0.000% 100.000%
[   40000,   45000 )     146   0.000% 100.000%
[   45000,   50000 )      94   0.000% 100.000%
[   50000,   60000 )     101   0.000% 100.000%
[   60000,   70000 )       8   0.000% 100.000%
[   70000,   80000 )       1   0.000% 100.000%
[  100000,  120000 )       1   0.000% 100.000%
[  140000,  160000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        4      209      1404        0    141322
  1        4      261      2815   199464    198146
  2       10      632       615    51691     51665
  3       13      843      2757   230174    229450
  4       24     1539      2245   188543    187640
  5      137     3169      3025   254393    252450
  6     1371    85276     13336  1153852   1109371
user_io:141322.374MB total_ios: 2170045.767MB WriteAmplification: 15.3553

Checking if iostat process with PID 2960191 is still running...
    PID TTY          TIME CMD
2960191 pts/1    00:00:00 iostat
iostat process 2960191 is still running, killing now...
iostat process 2960191 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_uniform_C0100.sh: line 43: 2960191 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_uniform_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '2960192':

     27,867,483.18 msec task-clock                       #    1.041 CPUs utilized
        22,516,686      context-switches                 #  807.991 /sec
             9,172      cpu-migrations                   #    0.329 /sec
        43,544,377      page-faults                      #    1.563 K/sec
86,889,976,626,415      cycles                           #    3.118 GHz
196,903,029,244,123      instructions                     #    2.27  insn per cycle
27,637,562,953,976      branches                         #  991.750 M/sec
    50,363,521,302      branch-misses                    #    0.18% of all branches
                        TopdownL1                 #      1.2 %  tma_backend_bound
                                                  #     90.4 %  tma_bad_speculation
                                                  #      3.7 %  tma_frontend_bound
                                                  #      4.7 %  tma_retiring

   26779.547763115 seconds time elapsed
