base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Fri Jan 10 13:03:54 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f2_mem8MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f2_mem8MiB_level1base_100
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 3037370
../../../leveldb/build_release_f_2_C0_100/db_bench --db=/mnt/db_test/LSM-tuning/level10/C0_100/leveldb_uniform_f2_mem8MiB_level1base_100 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/uniform_read_keys16_value128_1B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C0100/leveldb_uniform_f2_memory_usage_1B_key16_val128_mem8MiB_factor2_level1base100MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=8388608 --max_file_size=8388608 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/uniform_read_keys16_value128_1B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-10 13:40:21 ... thread 0: (99999999,99999999) ops and (45721.5,45721.5) ops/second in (2187.155713,2187.155713) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5      33     138        0        0     14210     14210      0     280  2158     0       0     0      0   280         0 0.000000 0.000000
    1    33     250     956    65499    65499     65329     65329      0     383   412     0       0     0   6975   383      1296 0.000000 8.156797
    2    50     399     189    15280    15280     15267     15267      0    1037  1087     0       0     0   1531  1037       652 8.156797 8.156811
    3   100     794     352    28002    28002     27925     27925      0     775   782     0       0     0   2826   775       772 8.156811 8.160694
    4   201    1598     220    17578    17578     17502     17502      0     535   535     0       0     0   1675   535       792 8.160694 8.161368
    5   393    3194     154    12332    12332     12243     12243      0     339   339     0       0     0   1222   339       583 8.161368 1.778781
    6   910    7418     104     8397     8397      8297      8297      0       0     0     0       0     0    851     0         0 1.778781 0.000000
user_io:14210.230MB total_ios: 160774.862MB WriteAmplification: 11.3140
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-10 14:32:26 ... thread 0: (100000000,199999999) ops and (31998.6,37648.5) ops/second in (3125.139054,5312.294767) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1       7     280        0        0     28434     28434      0     551  4327     0       0     0      0   551         0 0.000000 0.000000
    1    34     247    1980   132821   132821    132471    132471      0     634   663     0       0     0  14244   634      2781 0.000000 8.156955
    2    51     392     332    26270    26270     26245     26245      0    2261  2362     0       0     0   2644  2261      1213 8.156955 8.159076
    3   102     797     803    62769    62769     62593     62593      0    1675  1688     0       0     0   6457  1675      1606 8.159076 8.160833
    4   199    1595     507    39767    39767     39580     39580      0    1412  1416     0       0     0   3944  1412      1612 8.160833 8.161731
    5   400    3199     435    33984    33984     33705     33705      0    2015  2016     0       0     0   3556  2015       583 8.161731 1.778781
    6  2447   19957     756    60452    60452     59230     59230      0       0     0     0       0     0   6373     0         0 1.778781 0.000000
user_io:28433.613MB total_ios: 382256.976MB WriteAmplification: 13.4438
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13732.910 MB data into db.)


2025-01-10 15:30:37 ... thread 0: (100000000,299999999) ops and (28650.5,34080.7) ops/second in (3490.341846,8802.636613) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     7      46     422        0        0     42664     42664      0     821  6487     0       0     0      0   821         0 0.000000 0.000000
    1    28     198    3004   199907   199907    199375    199375      0     889   918     0       0     0  21462   889      4261 0.000000 8.157016
    2    53     399     472    37040    37040     37004     37004      0    3476  3626     0       0     0   3725  3476      1780 8.157016 8.158712
    3   100     798    1252    97406    97406     97132     97132      0    2599  2618     0       0     0   9998  2599      2414 8.158712 8.160743
    4   198    1611     799    62240    62240     61942     61942      0    2566  2574     0       0     0   6229  2566      2151 8.160743 8.158361
    5   521    3227     731    56585    56585     56122     56122      0    3765  3830     0       0     0   5971  3765       584 8.158361 0.000306
    6  3905   31244    1700   135791   135791    132254    132254      0       0     0     0       0     0  14676     0         0 0.000306 0.000000
user_io:42663.558MB total_ios: 626492.891MB WriteAmplification: 14.6845
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27465.820 MB data into db.)


2025-01-10 16:34:36 ... thread 0: (100000000,399999999) ops and (26048.5,31641.5) ops/second in (3838.986809,12641.623422) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4      26     565        0        0     56894     56894      0    1092  8655     0       0     0      0  1092         0 0.000000 0.000000
    1    27     209    4038   267222   267222    266510    266510      0    1145  1174     0       0     0  28713  1145      5742 0.000000 8.158631
    2    58     440     616    48048    48048     48001     48001      0    4681  4878     0       0     0   4841  4681      2355 8.158631 8.158070
    3   103     799    1695   131318   131318    130947    130947      0    3409  3437     0       0     0  13455  3409      3324 8.158070 8.158478
    4   199    1599    1056    81960    81960     81562     81562      0    4248  4259     0       0     0   8212  4248      2162 8.158478 8.161232
    5   603    3200    1069    82521    82521     81890     81890      0    5570  5763     0       0     0   8759  5570       584 8.161232 0.000306
    6  5302   41505    2920   232374   232374    225424    225424      0       0     0     0       0     0  25509     0         0 0.000306 0.000000
user_io:56893.503MB total_ios: 891227.698MB WriteAmplification: 15.6648
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41198.730 MB data into db.)


2025-01-10 17:46:55 ... thread 0: (100000000,499999999) ops and (23042.7,29444.0) ops/second in (4339.776435,16981.399857) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     711        0        0     71117     71117      0    1363 10825     0       0     0      0  1363         0 0.000000 0.000000
    1    33     248    5090   334585   334585    333692    333692      0    1401  1430     0       0     0  35992  1401      7222 0.000000 8.160754
    2    53     396     773    59944    59944     59884     59884      0    5903  6145     0       0     0   6070  5903      2921 8.160754 8.158513
    3   101     797    2151   165567   165567    165099    165099      0    4280  4314     0       0     0  16996  4280      4192 8.158513 8.159880
    4   199    1599    1339   103369   103369    102865    102865      0    5947  5960     0       0     0  10340  5947      2164 8.159880 1.234881
    5   717    3195    1406   107620   107620    106823    106823      0    7825  8020     0       0     0  11642  7825       584 1.234881 0.000306
    6  6416   50802    4498   354734   354734    343375    343375      0       0     0     0       0     0  39852     0         0 0.000306 0.000000
user_io:71116.876MB total_ios: 1182855.049MB WriteAmplification: 16.6326
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54931.641 MB data into db.)


2025-01-10 19:07:33 ... thread 0: (100000000,599999999) ops and (20670.0,27498.6) ops/second in (4837.919439,21819.319296) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     858        0        0     85347     85347      0    1633 12991     0       0     0      0  1633         0 0.000000 0.000000
    1    33     251    6141   401719   401719    400645    400645      0    1653  1682     0       0     0  43165  1653      8706 0.000000 8.160747
    2    53     399     922    71118    71118     71045     71045      0    7114  7413     0       0     0   7220  7114      3487 8.160747 0.017981
    3   100     796    2607   199877   199877    199312    199312      0    5228  5266     0       0     0  20515  5228      4982 0.017981 8.160775
    4   197    1597    1649   126713   126713    126094    126094      0    7641  7655     0       0     0  12715  7641      2165 8.160775 2.613300
    5   746    3194    1740   132182   132182    131215    131215      0   10457 10732     0       0     0  14512 10457       584 2.613300 0.000306
    6  7509   59164    6495   508780   508780    492133    492133      0       0     0     0       0     0  58276     0         0 0.000306 0.000000
user_io:85346.814MB total_ios: 1505790.270MB WriteAmplification: 17.6432
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68664.551 MB data into db.)


2025-01-10 20:30:58 ... thread 0: (100000000,699999999) ops and (19982.9,26096.4) ops/second in (5004.274216,26823.593512) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2      13    1007        0        0     99577     99577      0    1903 15155     0       0     0      0  1903         0 0.000000 0.000000
    1    32     251    7197   468834   468834    467580    467580      0    1907  1936     0       0     0  50380  1907     10187 0.000000 8.159163
    2    51     393    1071    82287    82287     82203     82203      0    8332  8674     0       0     0   8357  8332      4056 8.159163 6.136998
    3   102     798    3067   234210   234210    233546    233546      0    6047  6092     0       0     0  24086  6047      5890 6.136998 8.158493
    4   200    1599    1919   146757   146757    146038    146038      0    9337  9351     0       0     0  14736  9337      2165 8.158493 2.613300
    5   902    3198    2087   156579   156579    155443    155443      0   12408 13570     0       0     0  17527 12408       584 2.613300 0.000306
    6  8551   66757    8661   657538   657538    634826    634826      0       0     0     0       0     0  75747     0         0 0.000306 0.000000
user_io:99576.774MB total_ios: 1819213.574MB WriteAmplification: 18.2695
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82397.461 MB data into db.)


2025-01-10 21:58:10 ... thread 0: (100000000,799999999) ops and (19111.7,24956.3) ops/second in (5232.406810,32056.000322) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3      20    1160        0        0    113800    113800      0    2172 17319     0       0     0      0  2172         0 0.000000 0.000000
    1    32     247    8263   535757   535757    534323    534323      0    2152  2181     0       0     0  57582  2152     11676 0.000000 8.160618
    2    52     397    1224    93718    93718     93621     93621      0    9533  9927     0       0     0   9543  9533      4638 8.160618 8.158658
    3   101     798    3528   268150   268150    267390    267390      0    6921  6972     0       0     0  27612  6921      6744 8.158658 8.159783
    4   200    1597    2210   168213   168213    167387    167387      0   11029 11045     0       0     0  16924 11029      2168 8.159783 1.773386
    5   947    3193    2426   181137   181137    179831    179831      0   14434 15879     0       0     0  20783 14434       584 1.773386 0.000306
    6  9419   73614   10962   831418   831418    801905    801905      0       0     0     0       0     0  96428     0         0 0.000306 0.000000
user_io:113800.160MB total_ios: 2158256.938MB WriteAmplification: 18.9653
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96130.371 MB data into db.)


2025-01-10 23:15:55 ... thread 0: (100000000,899999999) ops and (21438.4,24509.5) ops/second in (4664.519542,36720.519864) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1       7    1287        0        0    128030    128030      0    2443 19487     0       0     0      0  2443         0 0.000000 0.000000
    1    29     213    9228   603079   603079    601463    601463      0    2407  2436     0       0     0  64839  2407     13162 0.000000 8.156816
    2    54     431    1356   104652   104652    104544    104544      0   10760 11204     0       0     0  10645 10760      5200 8.156816 8.160752
    3   102     794    3941   302838   302838    301979    301979      0    7819  7875     0       0     0  31223  7819      7582 8.160752 8.160454
    4   198    1596    2478   190602   190602    189668    189668      0   12727 12744     0       0     0  19243 12727      2169 8.160454 1.666661
    5   996    3195    2735   207169   207169    205667    205667      0   16484 17938     0       0     0  24681 16484       584 1.666661 0.000306
    6 10244   79826   13032  1006671  1006671    969722    969722      0       0     0     0       0     0 117204     0         0 0.000306 0.000000
user_io:128030.107MB total_ios: 2501072.731MB WriteAmplification: 19.5350
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109863.281 MB data into db.)


2025-01-11 00:35:14 ... thread 0: (100000000,999999999) ops and (21009.4,24107.8) ops/second in (4759.777661,41480.297525) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5      33    1412        0        0    142253    142253      0    2713 21648     0       0     0      0  2713         0 0.000000 0.000000
    1    32     248   10184   670174   670174    668378    668378      0    2660  2689     0       0     0  72039  2660     14633 0.000000 8.156779
    2    51     399    1486   115468   115468    115348    115348      0   11955 12451     0       0     0  11746 11955      5767 8.156779 8.157116
    3   102     798    4346   337059   337059    336103    336103      0    8672  8734     0       0     0  34723  8672      8456 8.157116 8.160724
    4   198    1594    2724   211292   211292    210253    210253      0   14418 14437     0       0     0  21324 14418      2171 8.160724 0.400151
    5   778    3198    3036   232773   232773    231074    231074      0   18589 20049     0       0     0  28712 18589       584 0.400151 0.000306
    6 10971   85418   15224  1195863  1195863   1150908   1150908      0       0     0     0       0     0 139714     0         0 0.000306 0.000000
user_io:142253.484MB total_ios: 2854317.933MB WriteAmplification: 20.0650
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123596.191 MB data into db.)


1000000000 operations have been finished (137329.102 MB data have been written into db)
fillzipf     :      41.480 micros/op 24107 ops/sec;    3.3 MB/s
Microseconds per op:
Count: 1000000000  Average: 41.4803  StdDev: 328.31
Percentiles: P50: 4.85 P75: 5.70 P99: 1136.57 P99.9: 1195.68 P99.99: 11060.68
------------------------------------------------------
[       2,       3 ) 1207460   0.121%   0.121%
[       3,       4 ) 115545875  11.555%  11.675% ##
[       4,       5 ) 448543031  44.854%  56.530% #########
[       5,       6 ) 264137411  26.414%  82.943% #####
[       6,       7 ) 76751541   7.675%  90.619% ##
[       7,       8 ) 27106881   2.711%  93.329% #
[       8,       9 ) 11523057   1.152%  94.482%
[       9,      10 ) 5733889   0.573%  95.055%
[      10,      12 ) 5164091   0.516%  95.571%
[      12,      14 ) 2481327   0.248%  95.819%
[      14,      16 ) 2175270   0.218%  96.037%
[      16,      18 ) 2925250   0.293%  96.330%
[      18,      20 ) 2631483   0.263%  96.593%
[      20,      25 ) 2563984   0.256%  96.849%
[      25,      30 )  460135   0.046%  96.895%
[      30,      35 )   88535   0.009%  96.904%
[      35,      40 )   28144   0.003%  96.907%
[      40,      45 )   14733   0.001%  96.908%
[      45,      50 )    7123   0.001%  96.909%
[      50,      60 )   29200   0.003%  96.912%
[      60,      70 )    8006   0.001%  96.913%
[      70,      80 )    6225   0.001%  96.913%
[      80,      90 )    5581   0.001%  96.914%
[      90,     100 )    3422   0.000%  96.914%
[     100,     120 )    7247   0.001%  96.915%
[     120,     140 )    5716   0.001%  96.915%
[     140,     160 )    4140   0.000%  96.916%
[     160,     180 )    3308   0.000%  96.916%
[     180,     200 )    3440   0.000%  96.917%
[     200,     250 )    6845   0.001%  96.917%
[     250,     300 )    4007   0.000%  96.918%
[     300,     350 )    3056   0.000%  96.918%
[     350,     400 )    2945   0.000%  96.918%
[     400,     450 )    2854   0.000%  96.919%
[     450,     500 )    2740   0.000%  96.919%
[     500,     600 )    6347   0.001%  96.919%
[     600,     700 )    5836   0.001%  96.920%
[     700,     800 )    2566   0.000%  96.920%
[     800,     900 )    1921   0.000%  96.920%
[     900,    1000 )    1482   0.000%  96.921%
[    1000,    1200 ) 30451014   3.045%  99.966% #
[    1200,    1400 )   61549   0.006%  99.972%
[    1400,    1600 )   23377   0.002%  99.974%
[    1600,    1800 )   15473   0.002%  99.976%
[    1800,    2000 )   11714   0.001%  99.977%
[    2000,    2500 )   21696   0.002%  99.979%
[    2500,    3000 )   21614   0.002%  99.981%
[    3000,    3500 )   21278   0.002%  99.983%
[    3500,    4000 )   15698   0.002%  99.985%
[    4000,    4500 )    9024   0.001%  99.986%
[    4500,    5000 )    6920   0.001%  99.987%
[    5000,    6000 )    9201   0.001%  99.987%
[    6000,    7000 )    6156   0.001%  99.988%
[    7000,    8000 )    5020   0.001%  99.989%
[    8000,    9000 )    4278   0.000%  99.989%
[    9000,   10000 )    4561   0.000%  99.989%
[   10000,   12000 )   10037   0.001%  99.990%
[   12000,   14000 )    9844   0.001%  99.991%
[   14000,   16000 )    9002   0.001%  99.992%
[   16000,   18000 )    9228   0.001%  99.993%
[   18000,   20000 )    7179   0.001%  99.994%
[   20000,   25000 )   15907   0.002%  99.996%
[   25000,   30000 )   13498   0.001%  99.997%
[   30000,   35000 )   20283   0.002%  99.999%
[   35000,   40000 )    5749   0.001% 100.000%
[   40000,   45000 )    1723   0.000% 100.000%
[   45000,   50000 )    1087   0.000% 100.000%
[   50000,   60000 )    1222   0.000% 100.000%
[   60000,   70000 )     455   0.000% 100.000%
[   70000,   80000 )      98   0.000% 100.000%
[   80000,   90000 )      10   0.000% 100.000%
[  120000,  140000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        5       33      1412        0    142253
  1       32      248     10184   670174    668378
  2       51      399      1486   115468    115348
  3      102      798      4346   337059    336103
  4      198     1594      2724   211292    210253
  5      778     3198      3036   232773    231074
  6    10971    85418     15224  1195863   1150908
user_io:142253.484MB total_ios: 2854317.933MB WriteAmplification: 20.0650

Checking if iostat process with PID 3037369 is still running...
    PID TTY          TIME CMD
3037369 pts/1    00:00:00 iostat
iostat process 3037369 is still running, killing now...
iostat process 3037369 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_uniform_C0100.sh: line 43: 3037369 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_uniform_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '3037370':

     38,274,070.73 msec task-clock                       #    0.923 CPUs utilized
        67,699,231      context-switches                 #    1.769 K/sec
            11,091      cpu-migrations                   #    0.290 /sec
        19,535,401      page-faults                      #  510.408 /sec
119,812,594,844,612      cycles                           #    3.130 GHz
273,866,720,575,636      instructions                     #    2.29  insn per cycle
39,112,164,716,824      branches                         #    1.022 G/sec
    87,737,747,065      branch-misses                    #    0.22% of all branches
                        TopdownL1                 #      0.8 %  tma_backend_bound
                                                  #     92.8 %  tma_bad_speculation
                                                  #      2.8 %  tma_frontend_bound
                                                  #      3.6 %  tma_retiring

   41479.702185999 seconds time elapsed
