base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
LevelDB:    version 1.23
Date:       Fri Jan 10 22:30:09 2025
CPU:        112 * Intel(R) Xeon(R) Gold 6348 CPU @ 2.60GHz
CPUCache:   43008 KB
open dbs:in Open()
entering db_impl.cc:/mnt/db_test2/LSM-tuning/level10/C0_10/leveldb_uniform_f4_mem64MiB_level1base_10
initialize 0 objects(LevelHotColdStats) for 7 levels
open dbs:in fresh_db()
open dbs:in Open()
entering db_impl.cc:/mnt/db_test2/LSM-tuning/level10/C0_10/leveldb_uniform_f4_mem64MiB_level1base_10
initialize 0 objects(LevelHotColdStats) for 7 levels
Selected DB_BENCH_PID: 3245564
../../../leveldb/build_release_f_4_C0_10/db_bench --db=/mnt/db_test2/LSM-tuning/level10/C0_10/leveldb_uniform_f4_mem64MiB_level1base_10 --num=1000000000 --value_size=128 --batch_size=1000 --benchmarks=fillzipf,stats --data_file=/mnt/workloads/uniform_read_keys16_value128_1B.csv --logpath=/mnt/logs --bloom_bits=10 --log=1 --cache_size=8388608 --mem_log_file=/home/jeff-wang/LSM-tuning/comparedDBs/performance_test_scripts/leveldb_experiment/10B_leveldb_tuning_structure(f_c0)_experiments_C010/leveldb_uniform_f4_memory_usage_1B_key16_val128_mem64MiB_factor4_level1base10MiB.log --open_files=40000 --compression=0 --stats_interval=100000000 --histogram=1 --write_buffer_size=67108864 --max_file_size=67108864 --print_wa=true
Keys:       16 bytes each
Values:     128 bytes each (64 bytes after compression)
Entries:    1000000000
RawSize:    137329.1 MB (estimated)
FileSize:   76293.9 MB (estimated)
WARNING: Optimization is disabled: benchmarks unnecessarily slow
WARNING: Assertions are enabled; benchmarks unnecessarily slow
some command parameters have been selected:
  threads: 1
  duration: 0
  print_wa: 1
  num_entries: 1000000000
  bechmark selected fillzipf,stats
  hot_file_path:
  data_file_path: /mnt/workloads/uniform_read_keys16_value128_1B.csv
  percentages:
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
some command parameters have been selected:
  The factor is 2
  The C0 base is: 2000 MiB
------------------------------------------------
start benchmarking num_ = 1000000000 entries in DoWrite_zipf2()
2025-01-10 22:50:48 ... thread 0: (99999999,99999999) ops and (80720.8,80720.8) ops/second in (1238.838647,1238.838647) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     157     131        0        0     13636     13636      0      34   258     0       0     0      0    34         0 0.000000 0.000000
    1     0       0     177    13479    13479     13700     13700      0      29    54     0       0     0      0    29       178 0.000000 65.258129
    2     2     131      56     4997     4997      5143      5143      0     108   134     0       0     0     35   108        92 65.258129 65.257408
    3    10     590     226    20455    20455     20408     20408      0     150   163     0       0     0    201   150        47 65.257408 65.258225
    4    19    1220     357    31946    31946     31829     31829      0     108   109     0       0     0    386   108        76 65.258225 42.603162
    5    56    3524     264    23876    23876     23666     23666      0       2     2     0       0     0    298     2       124 42.603162 17.830820
    6   126    8007       3      261      261       259       259      0       0     0     0       0     0      2     0         0 17.830820 0.000000
user_io:13635.910MB total_ios: 108641.607MB WriteAmplification: 7.9673
leveldb statistical: 99999999 operations (real operations: 100000000) have been finished (user has been written 0.000 MB data into db.)


2025-01-10 23:22:40 ... thread 0: (100000000,199999999) ops and (52317.9,63487.5) ops/second in (1911.390127,3150.228774) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     267        0        0     27690     27690      0      68   530     0       0     0      0    68         0 0.000000 0.000000
    1     7     415     363    27690    27690     27916     27916      0      57   111     0       0     0      0    57       356 0.000000 65.257729
    2     1      65     110     9985     9985     10121     10121      0     214   269     0       0     0     67   214       186 65.257729 65.259271
    3     4     260     451    40642    40642     40548     40548      0     321   342     0       0     0    398   321        92 65.259271 65.263330
    4    22    1199     761    68146    68146     67890     67890      0     281   289     0       0     0    855   281       117 65.263330 65.270729
    5    82    5113     742    66390    66390     65754     65754      0     190   191     0       0     0    863   190       124 65.270729 17.830820
    6   295   19166     401    36773    36773     35923     35923      0       0     0     0       0     0    473     0         0 17.830820 0.000000
user_io:27689.783MB total_ios: 275842.875MB WriteAmplification: 9.9619
leveldb statistical: 199999999 operations (real operations: 200000000) have been finished (user has been written 13732.910 MB data into db.)


2025-01-10 23:57:00 ... thread 0: (100000000,299999999) ops and (48530.8,57573.0) ops/second in (2060.548982,5210.777756) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313     402        0        0     41796     41796      0     101   794     0       0     0      0   101         0 0.000000 0.000000
    1     1      24     541    41482    41482     41664     41664      0      88   168     0       0     0      0    88       535 0.000000 65.258086
    2     4     261     172    15526    15526     15651     15651      0     323   406     0       0     0    100   323       282 65.258086 65.259151
    3     7     455     667    60157    60157     60021     60021      0     492   527     0       0     0    587   492       131 65.259151 64.829247
    4    23    1266    1163   103939   103939    103544    103544      0     467   481     0       0     0   1322   467       139 64.829247 65.271829
    5    99    5063    1185   105996   105996    104965    104965      0     394   403     0       0     0   1408   394       124 65.271829 17.830820
    6   473   30331     987    90887    90887     88060     88060      0       0     0     0       0     0   1195     0         0 17.830820 0.000000
user_io:41795.902MB total_ios: 455700.626MB WriteAmplification: 10.9030
leveldb statistical: 299999999 operations (real operations: 300000000) have been finished (user has been written 27465.820 MB data into db.)


2025-01-11 00:35:07 ... thread 0: (100000000,399999999) ops and (43736.8,53353.4) ops/second in (2286.405997,7497.183753) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     2     104     536        0        0     55798     55798      0     135  1066     0       0     0      0   135         0 0.000000 0.000000
    1     0       0     727    55693    55693     55880     55880      0     117   225     0       0     0      0   117       719 0.000000 65.258891
    2     3     196     229    20775    20775     20889     20889      0     433   545     0       0     0    133   433       378 65.258891 65.258352
    3     9     543     902    81108    81108     80925     80925      0     653   701     0       0     0    786   653       185 65.258352 65.263870
    4    21    1227    1542   137587   137587    137064    137064      0     685   706     0       0     0   1756   685       142 65.263870 22.610510
    5   108    5057    1685   150339   150339    148874    148874      0     614   642     0       0     0   2091   614       124 22.610510 17.830820
    6   641   40800    1740   160592   160592    154592    154592      0       0     0     0       0     0   2143     0         0 17.830820 0.000000
user_io:55797.527MB total_ios: 654021.407MB WriteAmplification: 11.7213
leveldb statistical: 399999999 operations (real operations: 400000000) have been finished (user has been written 41198.730 MB data into db.)


2025-01-11 01:15:36 ... thread 0: (100000000,499999999) ops and (41156.5,50368.0) ops/second in (2429.748996,9926.932749) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     0       0     670        0        0     69904     69904      0     169  1338     0       0     0      0   169         0 0.000000 0.000000
    1     7     415     911    69904    69904     70043     70043      0     146   283     0       0     0      0   146       895 0.000000 23.489877
    2     1      23     287    25985    25985     26088     26088      0     532   668     0       0     0    164   532       484 23.489877 65.260875
    3     4     258    1112    99927    99927     99700     99700      0     827   889     0       0     0    968   827       224 65.260875 65.260899
    4    23    1263    1969   175557   175557    174888    174888      0     901   928     0       0     0   2258   901       142 65.260899 22.610510
    5   109    5074    2163   192641   192641    190761    190761      0     837   879     0       0     0   2803   837       124 22.610510 17.830820
    6   791   50203    2635   241700   241700    231566    231566      0       0     0     0       0     0   3279     0         0 17.830820 0.000000
user_io:69903.640MB total_ios: 862949.565MB WriteAmplification: 12.3448
leveldb statistical: 499999999 operations (real operations: 500000000) have been finished (user has been written 54931.641 MB data into db.)


2025-01-11 01:56:57 ... thread 0: (100000000,599999999) ops and (40317.7,48358.9) ops/second in (2480.298974,12407.231723) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     6     313     805        0        0     84010     84010      0     202  1602     0       0     0      0   202         0 0.000000 0.000000
    1     0       0    1090    83696    83696     83792     83792      0     175   338     0       0     0      0   175      1077 0.000000 65.257456
    2     1      65     342    31033    31033     31125     31125      0     637   797     0       0     0    194   637       587 65.257456 65.257344
    3     6     348    1337   119978   119978    119704    119704      0    1000  1075     0       0     0   1165  1000       265 65.257344 65.263627
    4    25    1488    2376   211701   211701    210900    210900      0    1110  1147     0       0     0   2738  1110       143 65.263627 26.527660
    5   123    5083    2624   233410   233410    231126    231126      0    1068  1127     0       0     0   3507  1068       124 26.527660 17.830820
    6   931   58494    3605   332155   332155    317108    317108      0       0     0     0       0     0   4562     0         0 17.830820 0.000000
user_io:84009.747MB total_ios: 1077763.810MB WriteAmplification: 12.8290
leveldb statistical: 599999999 operations (real operations: 600000000) have been finished (user has been written 68664.551 MB data into db.)


2025-01-11 02:40:18 ... thread 0: (100000000,699999999) ops and (38448.3,46641.4) ops/second in (2600.894264,15008.125987) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     4     209     940        0        0     98116     98116      0     236  1874     0       0     0      0   236         0 0.000000 0.000000
    1     0       0    1275    97907    97907     97955     97955      0     205   396     0       0     0      0   205      1258 0.000000 65.257587
    2     3     154     399    36230    36230     36311     36311      0     744   932     0       0     0    225   744       683 65.257587 65.258081
    3    10     631    1570   140851   140851    140529    140529      0    1155  1243     0       0     0   1368  1155       319 65.258081 65.260462
    4    22    1255    2753   245016   245016    244088    244088      0    1322  1368     0       0     0   3181  1322       143 65.260462 26.527660
    5   121    5059    3106   275966   275966    273256    273256      0    1306  1372     0       0     0   4271  1306       124 26.527660 17.830820
    6  1058   66149    4685   432571   432571    411742    411742      0       0     0     0       0     0   6002     0         0 17.830820 0.000000
user_io:98115.865MB total_ios: 1301997.451MB WriteAmplification: 13.2700
leveldb statistical: 699999999 operations (real operations: 700000000) have been finished (user has been written 82397.461 MB data into db.)


2025-01-11 03:26:16 ... thread 0: (100000000,799999999) ops and (36258.2,45029.5) ops/second in (2758.000075,17766.126062) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     1      52    1073        0        0    112170    112170      0     270  2146     0       0     0      0   270         0 0.000000 0.000000
    1     1      23    1459   112117   112117    112118    112118      0     236   456     0       0     0      0   236      1436 0.000000 65.258253
    2     5     326     460    41730    41730     41799     41799      0     854  1062     0       0     0    258   854       784 65.258253 65.257737
    3     6     372    1793   160668   160668    160300    160300      0    1322  1422     0       0     0   1562  1322       365 65.257737 65.260653
    4    20    1254    3154   280471   280471    279407    279407      0    1539  1591     0       0     0   3651  1539       144 65.260653 15.789834
    5   135    5091    3605   319969   319969    316807    316807      0    1572  1640     0       0     0   5059  1572       124 15.789834 17.830820
    6  1161   73126    5884   543817   543817    516414    516414      0       0     0     0       0     0   7630     0         0 17.830820 0.000000
user_io:112169.737MB total_ios: 1539016.184MB WriteAmplification: 13.7204
leveldb statistical: 799999999 operations (real operations: 800000000) have been finished (user has been written 96130.371 MB data into db.)


2025-01-11 04:13:02 ... thread 0: (100000000,899999999) ops and (35635.4,43748.1) ops/second in (2806.198241,20572.324303) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     5     261    1205        0        0    126171    126171      0     303  2410     0       0     0      0   303         0 0.000000 0.000000
    1     0       0    1641   125910   125910    125971    125971      0     271   521     0       0     0      0   271      1606 0.000000 65.258268
    2     3     154     528    47858    47858     47915     47915      0     959  1190     0       0     0    299   959       888 65.258268 65.257920
    3    10     609    2010   180026   180026    179614    179614      0    1485  1601     0       0     0   1755  1485       406 65.257920 65.263081
    4    21    1265    3555   315775   315775    314573    314573      0    1750  1805     0       0     0   4112  1750       145 65.263081 22.869468
    5   145    5104    4058   359904   359904    356320    356320      0    1841  1930     0       0     0   5810  1841       124 22.869468 17.830820
    6  1270   79267    7178   663515   663515    629084    629084      0       0     0     0       0     0   9389     0         0 17.830820 0.000000
user_io:126171.360MB total_ios: 1779648.314MB WriteAmplification: 14.1050
leveldb statistical: 899999999 operations (real operations: 900000000) have been finished (user has been written 109863.281 MB data into db.)


2025-01-11 05:02:28 ... thread 0: (100000000,999999999) ops and (33711.5,42483.3) ops/second in (2966.342609,23538.666912) seconds
                               Compactions
Level Files Size(M) Time(s) ReadH(M) ReadC(M) WriteH(M) WriteC(M) m_comp si_comp ifile pfile se_comp ifiles pfiles comps triv_move t_last_b t_next_b
--------------------------------------------------
    0     3     157    1339        0        0    140277    140277      0     337  2682     0       0     0      0   337         0 0.000000 0.000000
    1     1      65    1825   140121   140121    140134    140134      0     299   572     0       0     0      0   299      1793 0.000000 65.258224
    2     6     349     581    52658    52658     52704     52704      0    1065  1318     0       0     0    329  1065       989 65.258224 23.494413
    3     6     349    2232   199927   199927    199469    199469      0    1660  1785     0       0     0   1951  1660       447 23.494413 65.260473
    4    21    1224    3972   352765   352765    351420    351420      0    1967  2024     0       0     0   4602  1967       145 65.260473 22.869468
    5   127    5058    4509   399605   399605    395613    395613      0    2129  2254     0       0     0   6586  2129       124 22.869468 17.830820
    6  1358   85014    8624   796867   796867    754541    754541      0       0     0     0       0     0  11370     0         0 17.830820 0.000000
user_io:140277.477MB total_ios: 2034160.315MB WriteAmplification: 14.5010
leveldb statistical: 999999999 operations (real operations: 1000000000) have been finished (user has been written 123596.191 MB data into db.)


1000000000 operations have been finished (137329.102 MB data have been written into db)
fillzipf     :      23.539 micros/op 42483 ops/sec;    5.8 MB/s
Microseconds per op:
Count: 1000000000  Average: 23.5387  StdDev: 146.20
Percentiles: P50: 5.73 P75: 6.63 P99: 1077.54 P99.9: 1187.97 P99.99: 1199.02
------------------------------------------------------
[       2,       3 )  130364   0.013%   0.013%
[       3,       4 ) 20279237   2.028%   2.041%
[       4,       5 ) 207957641  20.796%  22.837% ####
[       5,       6 ) 372362629  37.236%  60.073% #######
[       6,       7 ) 238729014  23.873%  83.946% #####
[       7,       8 ) 93301815   9.330%  93.276% ##
[       8,       9 ) 31158212   3.116%  96.392% #
[       9,      10 ) 10976237   1.098%  97.490%
[      10,      12 ) 5817540   0.582%  98.071%
[      12,      14 ) 1004734   0.100%  98.172%
[      14,      16 )  404049   0.040%  98.212%
[      16,      18 )  329344   0.033%  98.245%
[      18,      20 )  313756   0.031%  98.276%
[      20,      25 )  530608   0.053%  98.330%
[      25,      30 )  192483   0.019%  98.349%
[      30,      35 )   57201   0.006%  98.354%
[      35,      40 )   15840   0.002%  98.356%
[      40,      45 )    5110   0.001%  98.357%
[      45,      50 )    4333   0.000%  98.357%
[      50,      60 )   59478   0.006%  98.363%
[      60,      70 )    9337   0.001%  98.364%
[      70,      80 )    7555   0.001%  98.365%
[      80,      90 )    5950   0.001%  98.365%
[      90,     100 )    2828   0.000%  98.366%
[     100,     120 )    4765   0.000%  98.366%
[     120,     140 )    6947   0.001%  98.367%
[     140,     160 )    3001   0.000%  98.367%
[     160,     180 )    1740   0.000%  98.367%
[     180,     200 )    1277   0.000%  98.367%
[     200,     250 )    2304   0.000%  98.368%
[     250,     300 )     830   0.000%  98.368%
[     300,     350 )     574   0.000%  98.368%
[     350,     400 )     516   0.000%  98.368%
[     400,     450 )     579   0.000%  98.368%
[     450,     500 )     479   0.000%  98.368%
[     500,     600 )     966   0.000%  98.368%
[     600,     700 )     749   0.000%  98.368%
[     700,     800 )     347   0.000%  98.368%
[     800,     900 )     173   0.000%  98.368%
[     900,    1000 )     141   0.000%  98.368%
[    1000,    1200 ) 16299514   1.630%  99.998%
[    1200,    1400 )    6933   0.001%  99.999%
[    1400,    1600 )    1729   0.000%  99.999%
[    1600,    1800 )     670   0.000%  99.999%
[    1800,    2000 )     281   0.000%  99.999%
[    2000,    2500 )     319   0.000%  99.999%
[    2500,    3000 )     240   0.000%  99.999%
[    3000,    3500 )     251   0.000%  99.999%
[    3500,    4000 )     303   0.000%  99.999%
[    4000,    4500 )     344   0.000%  99.999%
[    4500,    5000 )     388   0.000%  99.999%
[    5000,    6000 )     829   0.000%  99.999%
[    6000,    7000 )     747   0.000%  99.999%
[    7000,    8000 )     846   0.000%  99.999%
[    8000,    9000 )     707   0.000%  99.999%
[    9000,   10000 )     662   0.000% 100.000%
[   10000,   12000 )     988   0.000% 100.000%
[   12000,   14000 )     896   0.000% 100.000%
[   14000,   16000 )     699   0.000% 100.000%
[   16000,   18000 )     502   0.000% 100.000%
[   18000,   20000 )     330   0.000% 100.000%
[   20000,   25000 )     559   0.000% 100.000%
[   25000,   30000 )     345   0.000% 100.000%
[   30000,   35000 )     140   0.000% 100.000%
[   35000,   40000 )      65   0.000% 100.000%
[   40000,   45000 )      17   0.000% 100.000%
[   45000,   50000 )      10   0.000% 100.000%
[   50000,   60000 )       2   0.000% 100.000%
[   60000,   70000 )       1   0.000% 100.000%

entering io_statistics1

                               Compactions
Level  Files Size(MB) Time(sec) Read(MB) Write(MB)
--------------------------------------------------
  0        3      157      1339        0    140277
  1        1       65      1825   140121    140134
  2        6      349       581    52658     52704
  3        6      349      2232   199927    199469
  4       21     1224      3972   352765    351420
  5      127     5058      4509   399605    395613
  6     1358    85014      8624   796867    754541
user_io:140277.477MB total_ios: 2034160.315MB WriteAmplification: 14.5010

Checking if iostat process with PID 3245563 is still running...
    PID TTY          TIME CMD
3245563 pts/11   00:00:00 iostat
iostat process 3245563 is still running, killing now...
iostat process 3245563 has been successfully killed.
base_num: 10000000000
num_entries: 1000000000
value_size:128
stats_interval: 100000000
1B
./leveldb_script_uniform_C010.sh: line 43: 3245563 Killed                  iostat -d 100 -x $DEVICE_NAME > leveldbf${F}_${num_format}_val_${value_size}_mem${buffer_size_mb}MB_uniform_IOstats_factor${F}_level1base${level1base}MiB.log

 Performance counter stats for process id '3245564':

     25,616,316.60 msec task-clock                       #    1.088 CPUs utilized
        20,490,052      context-switches                 #  799.883 /sec
             4,687      cpu-migrations                   #    0.183 /sec
        39,186,547      page-faults                      #    1.530 K/sec
81,338,247,048,754      cycles                           #    3.175 GHz
185,574,662,012,899      instructions                     #    2.28  insn per cycle
26,045,143,290,495      branches                         #    1.017 G/sec
    47,792,239,081      branch-misses                    #    0.18% of all branches
                        TopdownL1                 #      2.2 %  tma_backend_bound
                                                  #     88.6 %  tma_bad_speculation
                                                  #      4.9 %  tma_frontend_bound
                                                  #      4.4 %  tma_retiring

   23538.379132292 seconds time elapsed
